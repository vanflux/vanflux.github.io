{"version":3,"sources":["business/asm/operand.js","business/asm/instruction.js","business/asm/operations/operationsManager.js","business/utils.js","components/control/Control.module.css","components/registers/Registers.module.css","components/symbolTable/SymbolTable.module.css","components/console/Console.module.css","utils.js","components/assembled/Assembled.module.css","components/window/Window.module.css","business/asm/pseudoInstructionConversions/pseudoManager.js","business/asm/architectureManager.js","business/asm/architecture.js","business/asm/simulator/memory.js","business/asm/simulator/memoryStorage16.js","business/asm/simulator/registerBank.js","business/asm/simulator/simulation.js","business/asm/pseudoInstructionConversions/pseudoConverter.js","business/asm/disassembler/disassembler.js","business/asm/assembler/instructionParser.js","business/asm/assembler/dataParser.js","business/asm/assembler/commentParser.js","business/asm/assembler/lineParser.js","business/asm/assembler/assembler.js","components/simulator/Simulator.module.css","components/program/Program.module.css","components/app/App.module.css","components/simulator/Simulator.module.js","components/registers/Registers.module.js","components/program/Program.module.js","components/symbolTable/SymbolTable.module.js","components/control/Control.module.js","components/console/Console.module.js","components/assembled/Assembled.module.js","business/asm/operations sync /basic/.+/.js$","business/asm/operations/basic/adc.js","business/asm/operations/basic/add.js","business/asm/operations/basic/and.js","business/asm/operations/basic/asr.js","business/asm/operations/basic/bez.js","business/asm/operations/basic/bnz.js","business/asm/operations/basic/ldb.js","business/asm/operations/basic/ldc.js","business/asm/operations/basic/ldr.js","business/asm/operations/basic/ldw.js","business/asm/operations/basic/lsr.js","business/asm/operations/basic/or.js","business/asm/operations/basic/ror.js","business/asm/operations/basic/sbc.js","business/asm/operations/basic/slt.js","business/asm/operations/basic/sltu.js","business/asm/operations/basic/stb.js","business/asm/operations/basic/stw.js","business/asm/operations/basic/sub.js","business/asm/operations/basic/xor.js","business/asm/operations sync /pseudo/.+/.js$","business/asm/operations/pseudo/hcf.js","business/asm/operations/pseudo/ldi.js","business/asm/operations/pseudo/lsl.js","business/asm/operations/pseudo/pop.js","business/asm/operations/pseudo/push.js","business/asm/pseudoInstructionConversions sync /pseudos/.+/.js$","business/asm/pseudoInstructionConversions/pseudos/_large_immediate.js","business/asm/pseudoInstructionConversions/pseudos/asr.js","business/asm/pseudoInstructionConversions/pseudos/bez.js","business/asm/pseudoInstructionConversions/pseudos/bnz.js","business/asm/pseudoInstructionConversions/pseudos/hcf.js","business/asm/pseudoInstructionConversions/pseudos/ldb.js","business/asm/pseudoInstructionConversions/pseudos/ldi.js","business/asm/pseudoInstructionConversions/pseudos/ldw.js","business/asm/pseudoInstructionConversions/pseudos/lsl.js","business/asm/pseudoInstructionConversions/pseudos/lsr.js","business/asm/pseudoInstructionConversions/pseudos/pop.js","business/asm/pseudoInstructionConversions/pseudos/push.js","business/asm/pseudoInstructionConversions/pseudos/ror.js","business/asm/pseudoInstructionConversions/pseudos/stb.js","business/asm/pseudoInstructionConversions/pseudos/stw.js","components/window/Window.module.js","components/app/App.module.js","index.js","business/asm/index.js"],"names":["Operand","value","type","this","byteRange","REGISTER","SYMBOL","LITERAL","Instruction","operation","operands","getType","isPseudo","TYPE_R","supportR","TYPE_I","supportI","length","architecture","Error","getName","opcode","getOpcode","finalCode","getRegisterCode","getValue","rst","immediate","utils","signedToUnsigned","simulation","a","rsa","rsb","executeR","executeI","map","operand","join","code","rstCode","unsignedToSigned","getRegisterNameByCode","operationsManager","getOperationByOpcode","rsaCode","rsbCode","basicOps","pseudoOps","basicOpsByOpcode","basicOpsByName","pseudoOpsByName","basicOpsNames","pseudoOpsNames","opsNames","getOperationByName","name","setup","basicMs","require","keys","key","default","pseudoMs","Object","fromEntries","op","concat","getOperationNames","getBasicOperationByName","getPseudoOperationByName","isOperationName","isBasicOperationName","isPseudoOperationName","number","byteWidth","mask","Math","pow","signedNumberToHex","toString","padStart","isNegative","numberToBytes","bytes","i","unshift","bytesToNumber","byte","isInteger","str","isNaN","parseInt","sleep","ms","Promise","resolve","setTimeout","module","exports","callLimiter","func","delay","thId","lastArgs","args","pseudos","pseudoManager","pseudosMs","getPseudoInstructions","_16","_32","Architecture","bitWidth","registers","registersByName","entries","registerName","register","aliases","aliasName","reduce","b","registersNameByCode","hasRegisterName","architectureManager","getViking16Arch","getViking32Arch","Memory","storage","emit","reset","getDataLength","getBytesFromRange","getWordsFromRange","address","onReadByte","newValue","readByte","onReadWord","readWord","onWriteByte","writeByte","word","onWriteWord","writeWord","getBitWidth","MemoryStorage16","EventEmitter","data","Array","fill","byte0","byte1","start","end","slice","words","push","RegisterBank","registerInfos","registerByteWidth","forEach","setValue","oldValue","archRegisters","getRegisters","getByteWidth","defaultBreakpointHandler","pc","Simulation","memory","registerBank","codeExecutionMaxPC","runId","running","stopping","waitingInput","stepInterval","cycles","inputBytes","breakpointHandler","setupMemoryHandlers","stop","carry","setPC","setCycles","resetInput","writeObjCodeMemory","readInputChar","readInputInt","String","fromCharCode","getNextInputByte","zeroCharCode","charCodeAt","nineCharCode","minusCharCode","isMinusChar","c","isNumberChar","charToNumber","int","firstC","min","rawObjCode","wordArray","match","x","instruction","disassemble","execute","incrementPC","incrementCycles","step","console","error","clearTimeout","runner","bind","shift","getMask","getPC","handler","PseudoConverter","instructions","getNonPseudoInstructions","convInstruction","convInstructions","convert","splice","Disassembler","rawHex","result","arrayLiteral","exc","InstructionParser","parseOperation","parseOperands","isArray","operationName","operandValue","isRegisterName","operandsValues","split","trim","getInstructionOperandValueType","DataParser","parseToBytes","bytesToData","values","lastC","startIndex","capturingQuote","unraw","substring","extractValues","trimmed","splitted","some","curBytes","j","CommentParser","isComment","comment","matches","LineParser","instructionParser","dataParser","commentParser","symbol","rest","line","getSymbolAndRest","sanitizedRest","parse","isInstruction","Assembler","programData","pseudoConverter","lines","sequence","symbolTable","objectCodeArray","pass1","pass2","pass3","rawObjectCode","lineParser","parsed","message","getOperands","symbolValue","finalValue","getByteRange","max","setType","item","Number","assemble","Simulator","props","programRef","createRef","assembledRef","symbolTableRef","consoleRef","curArchitecture","createFromArchitecture","state","stepDelay","simulationOnRunErrorHandler","current","writeLine","simulationOnRunEndedHandler","simulationOnBreakpointHandler","simulationWriteCharHandler","char","write","simulationWriteIntHandler","on","off","getText","pseudoInstructions","assembler","assemblerResult","disassembler","disassemblerResult","disassembly","setRawObjCode","setAssembled","setSymbolTable","text","buffer","Buffer","from","addInput","className","styles","container","display","flexDirection","width","height","flex","overflow","ref","rightArea","justifyContent","onAssemble","onError","onControlError","onInput","Component","Registers","getRegisterInfos","self","valueUpdateHandler","setState","title","content","generalRegisterList","infos","Register","getUValue","pcRegister","registerContainer","alreadyCreatedLang","Program","regNames","getRegisterNames","monaco","languages","id","setMonarchTokensProvider","operationKeywords","registerKeywords","decimalNumbers","hexNumbers","escapes","tokenizer","root","cases","token","bracket","next","string","registerCompletionItemProvider","provideCompletionItems","suggestions","opName","label","detail","documentation","kind","CompletionItemKind","Function","insertText","editor","defineTheme","base","inherit","rules","foreground","program","language","theme","beforeMount","onEditorWillMount","onMount","onEditorMount","SymbolTable","columns","field","headerName","rows","newRows","symbolName","assign","gridContainer","classes","getRowClassName","row","getCellClassName","cell","disableDensitySelector","disableColumnMenu","disableColumnSelector","hideFooter","hideFooterPagination","hideFooterRowCount","hideFooterSelectedRowCount","showCellRightBorder","showColumnRightBorder","headerHeight","density","GridDensityTypes","Compact","Control","cyclesUpdateHandler","e","target","setStepInterval","callH","run","cycleArea","cycleLabel","getCycles","btn","onClick","assembleClick","resetClick","stopClick","runClick","stepClick","delayLabel","delayInput","getStepInterval","onChange","stepIntervalChanged","Console","outputRef","simulationInBufHandler","inputBuffer","setInputBuffer","scrollTop","scrollHeight","toLowerCase","outAndInBufContainer","output","readOnly","spellCheck","getInput","inputText","placeholder","onKeyDown","inputKeyDown","Assembled","onBreakpoint","breakpointDecorations","breakpoints","Set","curLineRunningDecorationId","curLineRunningDecoration","setBreakpointHandler","has","pcUpdateHandler","setLineRunning","simulationResetHandler","removeAllBreakpoints","breakpointList","setBreakpoint","lineNumber","lineCount","getModel","getLineCount","bpDec","deltaDecorations","range","Range","options","isWholeLine","glyphMarginClassName","breakpoint","add","delete","removeBreakpoint","currentLineRunning","revealLine","oldDec","updateOptions","wordBasedSuggestions","automaticLayout","lineDecorationsWidth","glyphMargin","minimap","enabled","lineNumbers","n","onMouseDown","position","toggleBreakpoint","webpackContext","req","webpackContextResolve","__webpack_require__","o","adc","getRegisterBank","getCarry","and","asr","setCarry","bez","bnz","ldb","getMemory","ldc","ldr","ldw","lsr","or","ror","getArchitecture","sbc","slt","sltu","stb","stw","sub","xor","hcf","ldi","lsl","pop","supportedOpNames","operationLdi","_large_immediate","getOperation","literal","operationAsr","operationBez","operationBnz","operationHcf","operationLdb","operationLdr","operationLdc","setByteRange","operationLdw","operationLsl","operationAdd","operationLsr","operationPop","operationPush","operationSub","operationStw","operationRor","operationStb","Window","description","header","children","App","ReactDOM","render","StrictMode","document","getElementById","memoryStorage16"],"mappings":"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","file":"static/js/main.07dc9950.chunk.js","sourcesContent":["export default class Operand {\r\n    static REGISTER = 'register';\r\n    static SYMBOL = 'symbol';\r\n    static LITERAL = 'literal';\r\n\r\n    constructor(value, type) {\r\n        this.value = value;\r\n        this.type = type;\r\n        this.byteRange = null;\r\n    }\r\n\r\n    setByteRange(byteRange) {\r\n        this.byteRange = byteRange;\r\n        return this;\r\n    }\r\n\r\n    setValue(value) {\r\n        this.value = value;\r\n        return this;\r\n    }\r\n    \r\n    setType(type) {\r\n        this.type = type;\r\n        return this;\r\n    }\r\n\r\n    getValue() {\r\n        return this.value;\r\n    }\r\n    \r\n    getType() {\r\n        return this.type;\r\n    }\r\n\r\n    getByteRange() {\r\n        return this.byteRange;\r\n    }\r\n}","import operationsManager from './operations/operationsManager';\r\nimport Operand from './operand';\r\nimport utils from '../utils';\r\n\r\nclass Instruction {\r\n    static TYPE_R = 'R';\r\n    static TYPE_I = 'I';\r\n    \r\n    static disassemble(code, architecture) {\r\n        let imm = (code >> 11) & 0b1;    \r\n        if (imm === 1) {\r\n            let opcode = code & 0b1111000000000000;     // 1111 0000 0000 0000\r\n            let rstCode = (code >> 8) & 0b111;          //      0111 0000 0000\r\n            let immediate = code & 0b11111111;          //           1111 1111\r\n            immediate = utils.unsignedToSigned(immediate, 1);\r\n            \r\n            let rst = architecture.getRegisterNameByCode(rstCode);\r\n            \r\n            if (!rst) throw new Error('rst doesnt exist');\r\n    \r\n            let operation = operationsManager.getOperationByOpcode(opcode);\r\n            if (!operation) throw new Error('operation doesnt exist');\r\n    \r\n            let operands = [\r\n                new Operand(rst, Operand.REGISTER),\r\n                new Operand(immediate, Operand.LITERAL),\r\n            ];\r\n            \r\n            return new Instruction(operation, operands);\r\n        } else {\r\n            let opcode = code & 0b1111000000000011;     // 1111 0000 0000 0011\r\n            let rstCode = (code >> 8) & 0b111;          //      0111 0000 0000\r\n            let rsaCode = (code >> 5) & 0b111;          //           1110 0000\r\n            let rsbCode = (code >> 2) & 0b111;          //              1 1100\r\n    \r\n            let rst = architecture.getRegisterNameByCode(rstCode);\r\n            let rsa = architecture.getRegisterNameByCode(rsaCode);\r\n            let rsb = architecture.getRegisterNameByCode(rsbCode);\r\n            if (!rst) throw new Error('rst doesnt exist');\r\n            if (!rsa) throw new Error('rsa doesnt exist');\r\n            if (!rsb) throw new Error('rsb doesnt exist');\r\n    \r\n            let operation = operationsManager.getOperationByOpcode(opcode);\r\n            if (!operation) throw new Error('operation doesnt exist');\r\n    \r\n            let operands = [\r\n                new Operand(rst, Operand.REGISTER),\r\n                new Operand(rsa, Operand.REGISTER),\r\n                new Operand(rsb, Operand.REGISTER),\r\n            ];\r\n    \r\n            return new Instruction(operation, operands);\r\n        }\r\n    }\r\n\r\n    constructor(operation, operands) {\r\n        this.operation = operation;\r\n        this.operands = operands;\r\n    }\r\n    \r\n    isPseudo() {\r\n        let type = this.getType();\r\n        if (type === null) return true;\r\n        if (this.operation === null) return true;\r\n        if (this.operation.isPseudo()) return true;\r\n        switch (type) {\r\n            case Instruction.TYPE_R:\r\n                if (!this.operation.supportR()) {\r\n                    return true;\r\n                } else {\r\n                    break;\r\n                }\r\n            case Instruction.TYPE_I:\r\n                if (!this.operation.supportI()) {\r\n                    return true;\r\n                } else {\r\n                    break;\r\n                }\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    getType() {\r\n        if (this.operands.length === 2 && \r\n            this.operands[0].getType() === Operand.REGISTER &&\r\n            this.operands[1].getType() === Operand.LITERAL) return Instruction.TYPE_I;\r\n        if (this.operands.length === 3 && \r\n            this.operands[0].getType() === Operand.REGISTER &&\r\n            this.operands[1].getType() === Operand.REGISTER &&\r\n            this.operands[2].getType() === Operand.REGISTER) return Instruction.TYPE_R;\r\n        return null;\r\n    }\r\n\r\n    assemble(architecture) {\r\n        if (!this.operation) throw new Error('Operation doesnt exists');\r\n        if (this.operation.getName() === 'hcf') return 0x0003;\r\n        if (this.operation.isPseudo()) throw new Error('Operation is pseudo-operation');\r\n        if (!this.operands) throw new Error('Operands doesnt exists');\r\n\r\n        let type = this.getType();\r\n        if (!type) throw new Error('Invalid instruction type');\r\n\r\n        let opcode = this.operation.getOpcode();\r\n        if (!type) throw new Error('Operation doesnt have opcode');\r\n\r\n        let finalCode = 0x0000;\r\n        switch (type) {\r\n            case Instruction.TYPE_R: {\r\n                let rst = architecture.getRegisterCode(this.operands[0].getValue());\r\n                let rsa = architecture.getRegisterCode(this.operands[1].getValue());\r\n                let rsb = architecture.getRegisterCode(this.operands[2].getValue());\r\n                finalCode |= opcode;    // operation code\r\n                finalCode |= 0 << 11;   // imm\r\n                finalCode |= rst << 8;\r\n                finalCode |= rsa << 5;\r\n                finalCode |= rsb << 2;\r\n                break;\r\n            }\r\n            case Instruction.TYPE_I: {\r\n                let rst = architecture.getRegisterCode(this.operands[0].getValue());\r\n                let immediate = this.operands[1].getValue();\r\n                immediate = utils.signedToUnsigned(immediate, 1);\r\n\r\n                finalCode |= opcode;    // operation code\r\n                finalCode |= 1 << 11;   // imm\r\n                finalCode |= rst << 8;\r\n                finalCode |= immediate;\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n        return finalCode;\r\n    }\r\n\r\n    getOperation() {\r\n        return this.operation;\r\n    }\r\n    \r\n    getOperands() {\r\n        return this.operands;\r\n    }\r\n\r\n    async execute(simulation) {\r\n        if (!this.operation) throw new Error('Instruction has no operation');\r\n\r\n        let type = this.getType();\r\n        if (!type) throw new Error('Invalid instruction type');\r\n\r\n        switch (type) {\r\n            case Instruction.TYPE_R: {\r\n                let rst = this.operands[0].getValue();\r\n                let rsa = this.operands[1].getValue();\r\n                let rsb = this.operands[2].getValue();\r\n                \r\n                if (typeof this.operation.executeR === 'function') {\r\n                    await this.operation.executeR(simulation, rst, rsa, rsb);\r\n                } else {\r\n                    throw new Error('The operation \"' + this.operation.getName() + '\" doesnt support type R');\r\n                }\r\n                break;\r\n            }\r\n            case Instruction.TYPE_I: {\r\n                let rst = this.operands[0].getValue();\r\n                let immediate = this.operands[1].getValue();\r\n                \r\n                if (typeof this.operation.executeI === 'function') {\r\n                    await this.operation.executeI(simulation, rst, immediate);\r\n                } else {\r\n                    throw new Error('The operation \"' + this.operation.getName() + '\" doesnt support type I');\r\n                }\r\n                break;\r\n            }\r\n            default:\r\n        }\r\n    }\r\n\r\n    toString() {\r\n        return this.operation.getName() + ' ' + this.operands.map(operand => operand.getValue()).join(',');\r\n    }\r\n}\r\n\r\nexport default Instruction;","\r\nlet basicOps = [];\r\nlet pseudoOps = [];\r\nlet basicOpsByOpcode = {};\r\nlet basicOpsByName = {};\r\nlet pseudoOpsByName = {};\r\nlet basicOpsNames = [];\r\nlet pseudoOpsNames = [];\r\nlet opsNames = [];\r\n\r\nfunction setup() {\r\n    const basicMs = require.context('./', true, /basic\\/.+\\.js$/);\r\n    basicOps = basicMs.keys().map(key => basicMs(key, true).default);\r\n    const pseudoMs = require.context('./', true, /pseudo\\/.+\\.js$/);\r\n    pseudoOps = pseudoMs.keys().map(key => pseudoMs(key, true).default);\r\n\r\n    basicOpsByOpcode = Object.fromEntries(\r\n        basicOps.map(op => [\r\n            op.getOpcode(), // key\r\n            op              // value\r\n        ])\r\n    );\r\n\r\n    basicOpsByName = Object.fromEntries(\r\n        basicOps.map(op => [\r\n            op.getName(),   // key\r\n            op              // value\r\n        ])\r\n    );\r\n    pseudoOpsByName = Object.fromEntries(\r\n        pseudoOps.map(op => [\r\n            op.getName(),   // key\r\n            op              // value\r\n        ])\r\n    );\r\n\r\n    basicOpsNames = Object.keys(basicOpsByName);\r\n    pseudoOpsNames = Object.keys(pseudoOpsByName);\r\n    opsNames = basicOpsNames.concat(pseudoOpsNames);\r\n}\r\n\r\nfunction getOperationNames() {\r\n    return opsNames;\r\n}\r\n\r\nfunction getOperationByName(name) {\r\n    return basicOpsByName[name] || pseudoOpsByName[name];\r\n}\r\n\r\nfunction getBasicOperationByName(name) {\r\n    return basicOpsByName[name];\r\n}\r\n\r\nfunction getPseudoOperationByName(name) {\r\n    return pseudoOpsByName[name];\r\n}\r\n\r\nfunction isOperationName(name) {\r\n    return getOperationByName(name) != null;\r\n}\r\n\r\nfunction isBasicOperationName(name) {\r\n    return basicOpsByName[name] != null;\r\n}\r\n\r\nfunction isPseudoOperationName(name) {\r\n    return pseudoOpsByName[name] != null;\r\n}\r\n\r\nfunction getOperationByOpcode(opcode) {\r\n    return basicOpsByOpcode[opcode];\r\n}\r\n\r\nconst operationsManager = {\r\n    setup,\r\n    getOperationNames,\r\n    getOperationByName,\r\n    getBasicOperationByName,\r\n    getPseudoOperationByName,\r\n    isOperationName,\r\n    isBasicOperationName,\r\n    isPseudoOperationName,\r\n    getOperationByOpcode,\r\n};\r\n\r\nexport default operationsManager;","function signedNumberToHex(number, byteWidth=4) {\r\n    return signedToUnsigned(number, byteWidth).toString(16).padStart(byteWidth * 2, '0');\r\n}\r\n\r\nfunction signedToUnsigned(number, byteWidth=2) {\r\n    let mask = Math.pow(2, byteWidth * 8) - 1;\r\n    return (((number >>> 0) & mask) >>> 0);\r\n}\r\n\r\nfunction unsignedToSigned(number, byteWidth=2) {\r\n\tlet mask = Math.pow(2, byteWidth * 8) - 1;\r\n\tlet isNegative = (number >> (byteWidth * 8 - 1)) & 1;\r\n\tif (isNegative) {\r\n\t\treturn -(((~number+1) & mask) >>> 0);\r\n\t} else {\r\n\t\treturn number & mask;\r\n\t}\r\n}\r\n\r\nfunction numberToBytes(number, byteWidth=2) {\r\n    let bytes = [];\r\n    for (let i = 0; i < byteWidth; i++) {\r\n        bytes.unshift(number & 0xff);\r\n        number >>= 8;\r\n    }\r\n    return bytes;\r\n}\r\n\r\nfunction bytesToNumber(bytes) {\r\n    let number = 0;\r\n    for (let byte of bytes) {\r\n        number <<= 8;\r\n        number |= byte;\r\n    }\r\n    return number;\r\n}\r\n\r\nfunction isInteger(str) {\r\n    return !isNaN(parseInt(str));\r\n}\r\n\r\nfunction sleep(ms) {\r\n    if (ms <= 0) return 0;\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nconst utils = {\r\n    signedNumberToHex,\r\n    signedToUnsigned,\r\n    unsignedToSigned,\r\n    numberToBytes,\r\n    bytesToNumber,\r\n    isInteger,\r\n    sleep,\r\n};\r\n\r\nexport default utils;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Control_container__Day7V\",\"content\":\"Control_content__3iIfu\",\"title\":\"Control_title__Fct6q\",\"cycleArea\":\"Control_cycleArea__3W0Sp\",\"cycleLabel\":\"Control_cycleLabel__o6-yf\",\"btn\":\"Control_btn__S6MpS\",\"delayLabel\":\"Control_delayLabel__1Cctf\",\"delayInput\":\"Control_delayInput__lHshL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Registers_container__2s4UW\",\"title\":\"Registers_title__1C9vy\",\"content\":\"Registers_content__3IXg7\",\"generalRegisterList\":\"Registers_generalRegisterList__FB2qd\",\"pcRegister\":\"Registers_pcRegister__3EfW7\",\"registerContainer\":\"Registers_registerContainer__3HYMJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SymbolTable_container__-A6je\",\"title\":\"SymbolTable_title__1Uqqp\",\"gridContainer\":\"SymbolTable_gridContainer__1AJgG\",\"row\":\"SymbolTable_row__3egus\",\"cell\":\"SymbolTable_cell__fWKNX\",\"root\":\"SymbolTable_root__2PCcv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Console_container__3nKjQ\",\"output\":\"Console_output__3CcGx\",\"inputBuffer\":\"Console_inputBuffer__2jMXE\",\"outAndInBufContainer\":\"Console_outAndInBufContainer__ZSkiW\",\"title\":\"Console_title__2sfHt\",\"inputText\":\"Console_inputText__rkhPv\"};","\r\nfunction callLimiter(func, delay) {\r\n  let thId = null;\r\n  let lastArgs = null;\r\n  return (...args) => {\r\n    lastArgs = args;\r\n    if (thId == null) {\r\n      thId = setTimeout(() => {\r\n        func(...lastArgs);\r\n        thId = null;\r\n      }, delay);\r\n    }\r\n  }\r\n}\r\n\r\nconst utils = {\r\n  callLimiter,\r\n};\r\n\r\nexport default utils;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Assembled_container__1jNx0\",\"editor\":\"Assembled_editor__3jQwh\",\"title\":\"Assembled_title__kk-F7\",\"breakpoint\":\"Assembled_breakpoint__2cdAw\",\"currentLineRunning\":\"Assembled_currentLineRunning__eYaaP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Window_container__3JkxK\",\"header\":\"Window_header__ygOBE\",\"title\":\"Window_title__2aHbv\",\"description\":\"Window_description__1NaN6\",\"content\":\"Window_content__3bL7I\"};","let pseudos = [];\r\n\r\nfunction setup() {\r\n    const pseudosMs = require.context('./', true, /pseudos\\/.+\\.js$/);\r\n    pseudos = pseudosMs.keys().map(key => pseudosMs(key, true).default);\r\n}\r\n\r\nfunction getPseudoInstructions() {\r\n    return pseudos;\r\n}\r\n\r\nconst pseudoManager = {\r\n    setup,\r\n    getPseudoInstructions,\r\n};\r\n\r\nexport default pseudoManager;","import Architecture from './architecture';\r\n\r\nlet _16;\r\nlet _32;\r\n\r\nfunction setup() {\r\n    _16 = new Architecture({\r\n        bitWidth: 16,\r\n        registers: {\r\n            'r0': { code: 0, aliases: [ 'at' ] },\r\n            'r1': { code: 1, aliases: [] },\r\n            'r2': { code: 2, aliases: [] },\r\n            'r3': { code: 3, aliases: [] },\r\n            'r4': { code: 4, aliases: [] },\r\n            'r5': { code: 5, aliases: [ 'sr' ] },\r\n            'r6': { code: 6, aliases: [ 'lr' ] },\r\n            'r7': { code: 7, aliases: [ 'sp' ] },\r\n        },\r\n    });\r\n    _32 = new Architecture({\r\n        bitWidth: 32,\r\n        registers: {\r\n            'r0': { code: 0, aliases: [ 'at' ] },\r\n            'r1': { code: 1, aliases: [] },\r\n            'r2': { code: 2, aliases: [] },\r\n            'r3': { code: 3, aliases: [] },\r\n            'r4': { code: 4, aliases: [] },\r\n            'r5': { code: 5, aliases: [ 'sr' ] },\r\n            'r6': { code: 6, aliases: [ 'lr' ] },\r\n            'r7': { code: 7, aliases: [ 'sp' ] },\r\n        },\r\n    });\r\n}\r\n\r\nfunction getViking16Arch() {\r\n    return _16;\r\n}\r\n\r\nfunction getViking32Arch() {\r\n    return _32;\r\n}\r\n\r\nconst architectureManager = {\r\n    setup,\r\n    getViking16Arch,\r\n    getViking32Arch,\r\n};\r\n\r\nexport default architectureManager;","export default class Architecture {\r\n    constructor({ bitWidth, registers }) {\r\n        this.bitWidth = bitWidth;\r\n        this.byteWidth = bitWidth / 8;\r\n        this.mask = Math.pow(2, bitWidth) - 1;\r\n\r\n        this.registers = registers;\r\n\r\n        this.registersByName = Object.fromEntries(\r\n            Object.entries(registers)\r\n            .map(([registerName, register]) => [\r\n                [\r\n                    registerName,   // key      registerName\r\n                    register,       // value    register\r\n                ],\r\n                ...register.aliases.map(aliasName => [\r\n                        aliasName,  // key      registerName\r\n                        register,   // value    register\r\n                    ]\r\n                )\r\n            ])\r\n            .reduce((a, b) => a.concat(b))\r\n        );\r\n        this.registersNameByCode = Object.fromEntries(\r\n            Object.entries(registers)\r\n            .map(([registerName, register]) => [\r\n                [\r\n                    register.code,  // key      registerName\r\n                    registerName,   // value    register\r\n                ],\r\n            ])\r\n            .reduce((a, b) => a.concat(b))\r\n        );\r\n    }\r\n\r\n    getMask() {\r\n        return this.mask;\r\n    }\r\n\r\n    getBitWidth() {\r\n        return this.bitWidth;\r\n    }\r\n\r\n    getByteWidth() {\r\n        return this.byteWidth;\r\n    }\r\n\r\n    hasRegisterName(name) {\r\n        return this.registersByName[name] != null;\r\n    }\r\n\r\n    getRegisterNames() {\r\n        return Object.keys(this.registersByName);\r\n    }\r\n\r\n    getRegisters() {\r\n        return this.registers;\r\n    }\r\n\r\n    getRegisterNameByCode(code) {\r\n        return this.registersNameByCode[code];\r\n    }\r\n\r\n    getRegisterCode(name) {\r\n        if (!this.hasRegisterName(name)) throw new Error('Register doesnt exists');\r\n        return this.registersByName[name].code;\r\n    }\r\n}","import { EventEmitter } from 'events';\r\nimport MemoryStorage16 from './memoryStorage16';\r\n\r\nclass Memory extends EventEmitter {\r\n    static createFromArchitecture (architecture, ...args) {\r\n        let bitWidth = architecture.getBitWidth();\r\n        let storage;\r\n        switch (bitWidth) {\r\n            case 16:\r\n                storage = new MemoryStorage16();\r\n                break;\r\n            /*case 32:\r\n                storage = new MemoryStorage16();\r\n                break;*/\r\n            default:\r\n                throw new Error('Memory for this architecture doesnt exists (implementation doesnt exists)');\r\n        }\r\n        return new Memory(storage);\r\n    }\r\n\r\n    constructor(storage) {\r\n        super();\r\n        this.storage = storage;\r\n    }\r\n\r\n    async reset(...args) {\r\n        this.emit('reset');\r\n        return this.storage.reset(...args);\r\n    }\r\n    \r\n    async getDataLength(...args) {\r\n        return this.storage.getDataLength(...args);\r\n    }\r\n    \r\n    async getBytesFromRange(...args) {\r\n        return this.storage.getBytesFromRange(...args);\r\n    }\r\n    \r\n    async getWordsFromRange(...args) {\r\n        return this.storage.getWordsFromRange(...args);\r\n    }\r\n    \r\n    async readByte(address) {\r\n        if (this.onReadByte) {\r\n            let newValue = await this.onReadByte(address);\r\n            if (newValue != null) {\r\n                return newValue;\r\n            }\r\n        }\r\n        this.emit('storage read byte', address);\r\n        return this.storage.readByte(address);\r\n    }\r\n    \r\n    async readWord(address) {\r\n        if (this.onReadWord) {\r\n            let newValue = await this.onReadWord(address);\r\n            if (newValue != null) {\r\n                return newValue;\r\n            }\r\n        }\r\n        this.emit('storage read word', address);\r\n        return this.storage.readWord(address);\r\n    }\r\n\r\n    async writeByte(address, byte) {\r\n        if (this.onWriteByte) {\r\n            if (!await this.onWriteByte(address, byte)) {\r\n                return false;\r\n            }\r\n        }\r\n        this.emit('storage write byte', address, byte);\r\n        this.storage.writeByte(address, byte);\r\n        return true;\r\n    }\r\n    \r\n    async writeWord(address, word) {\r\n        if (this.onWriteWord) {\r\n            if(!await this.onWriteWord(address, word)) {\r\n                return false;\r\n            }\r\n        }\r\n        this.emit('storage write word', address, word);\r\n        this.storage.writeWord(address, word);\r\n        return true;\r\n    }\r\n}\r\n\r\nexport default Memory;","export default class MemoryStorage16 {\r\n    constructor() {\r\n        this.data = new Array(0xFFFF + 1).fill(0);\r\n    }\r\n\r\n    reset() {\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            this.data[i] = 0;\r\n        }\r\n    }\r\n\r\n    async readByte(address) {\r\n        return this.data[address];\r\n    }\r\n\r\n    async readWord(address) {\r\n        let byte0 = this.data[address];\r\n        let byte1 = this.data[address+1];\r\n        return (byte0 << 8) | byte1;\r\n    }\r\n\r\n    async writeByte(address, byte) {\r\n        this.data[address] = byte & 0xFF;\r\n    }\r\n\r\n    async writeWord(address, word) {\r\n        let byte0 = (word >> 8) & 0xFF;\r\n        let byte1 = word & 0xFF;\r\n        this.data[address] = byte0;\r\n        this.data[address+1] = byte1;\r\n    }\r\n\r\n    getDataLength() {\r\n        return this.data.length;\r\n    }\r\n\r\n    getData() {\r\n        return this.data;\r\n    }\r\n\r\n    getBytesFromRange(start, end) {\r\n        return this.data.slice(start, end);\r\n    }\r\n    \r\n    getWordsFromRange(start, end) {\r\n        let byte0;\r\n        let words = [];\r\n        for (let i = start; i < end; i++) {\r\n            if (i % 2 === 0) {\r\n                byte0 = this.data[i];\r\n            } else {\r\n                let byte1 = this.data[i];\r\n                let word = (byte0 << 8) | byte1;\r\n                words.push(word);\r\n            }\r\n        }\r\n        return words;\r\n    }\r\n}","import { EventEmitter } from 'events';\r\nimport utils from '../../utils';\r\n\r\nexport default class RegisterBank extends EventEmitter {\r\n\r\n    static createFromArchitecture (architecture, ...args) {\r\n        let archRegisters = architecture.getRegisters();\r\n        return new RegisterBank(archRegisters, architecture.getByteWidth(), ...args);\r\n    }\r\n\r\n    constructor (registerInfos, registerByteWidth) {\r\n        super();\r\n        this.registerInfos = registerInfos;\r\n        this.registerByteWidth = registerByteWidth;\r\n        this.setup();\r\n    }\r\n\r\n    getRegisterInfos() {\r\n        return this.registerInfos;\r\n    }\r\n\r\n    getRegisterInfo(name) {\r\n        return this.registerInfos[name];\r\n    }\r\n\r\n    setup() {\r\n        this.mask = Math.pow(2, 8 * this.registerByteWidth) - 1;\r\n\r\n        this.registers = {};\r\n        for (let registerName in this.registerInfos) {\r\n            let registerInfo = this.registerInfos[registerName];\r\n            let { aliases } = registerInfo;\r\n\r\n            let register = {\r\n                name: registerName,\r\n                aliases,\r\n                value: 0,\r\n            };\r\n            \r\n            this.registers[registerName] = register;\r\n            aliases.forEach(aliasName => this.registers[aliasName] = register);\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        for (let registerName in this.registers) {\r\n            this.setValue(registerName, 0);\r\n        }\r\n    }\r\n\r\n    setValue(registerName, newValue) {\r\n        newValue = (newValue & this.mask) >>> 0;\r\n        let register = this.registers[registerName];\r\n        let oldValue = register.value;\r\n        register.value = newValue;\r\n        this.emit('value update', { registerName: register.name, oldValue, newValue });\r\n    }\r\n\r\n    getValue(registerName) {\r\n        return utils.unsignedToSigned(this.registers[registerName].value, this.registerByteWidth);\r\n    }\r\n    \r\n    getUValue(registerName) {\r\n        return this.registers[registerName].value;\r\n    }\r\n}","import { EventEmitter } from 'events';\r\nimport Instruction from '../instruction';\r\nimport utils from '../../utils';\r\n\r\nconst endSimulationCode = 0x0003;\r\nconst defaultBreakpointHandler = (simulation, pc) => false;\r\n\r\nexport default class Simulation extends EventEmitter {\r\n    constructor(architecture, memory, registerBank) {\r\n        super();\r\n\r\n        this.architecture = architecture;\r\n        this.memory = memory;\r\n        this.registerBank = registerBank;\r\n        this.codeExecutionMaxPC = 0;\r\n        this.runId = null;\r\n        this.running = false;\r\n        this.stopping = false;\r\n        this.waitingInput = false;\r\n        this.stepInterval = 50;\r\n        this.cycles = 0;\r\n        this.pc = 0;\r\n        this.inputBytes = [];\r\n\r\n        this.breakpointHandler = defaultBreakpointHandler;\r\n        this.setupMemoryHandlers();\r\n    }\r\n\r\n    async reset() {\r\n        if (this.running && !this.stopping) await this.stop();\r\n        this.carry = 0;\r\n        this.setPC(0);\r\n        this.setCycles(0);\r\n        this.resetInput();\r\n        this.registerBank.reset();\r\n        this.memory.reset();\r\n        await this.writeObjCodeMemory();\r\n        this.registerBank.setValue('sp', 0xdffe);\r\n        this.emit('reset');\r\n    }\r\n\r\n    setupMemoryHandlers() {\r\n        this.memory.onReadWord = async (address) => {\r\n            if (address < 0xe000) return; // ok\r\n\r\n            switch (address) {\r\n                case 0xf004:\r\n                    this.waitingInput = true;\r\n                    while(!this.stopping && this.inputBytes.length < 1) await utils.sleep(50);\r\n                    this.waitingInput = false;\r\n                    if (this.stopping) throw new Error('User stopped simulation without give input');\r\n                    return this.readInputChar();\r\n                case 0xf006:\r\n                    this.waitingInput = true;\r\n                    while(!this.stopping && this.inputBytes.length < 2) await utils.sleep(50);\r\n                    this.waitingInput = false;\r\n                    if (this.stopping) throw new Error('User stopped simulation without give input');\r\n                    return this.readInputInt();\r\n                default:\r\n                    // read on unauthorized location\r\n                    this.emit('run error', new Error('read on unauthorized location [' + address.toString(16) + ']'));\r\n                    await this.stop();\r\n            }\r\n        };\r\n        \r\n        this.memory.onWriteWord = async (address, value) => {\r\n            if (address < 0xe000) return true; // ok\r\n\r\n            switch (address) {\r\n                case 0xf000:\r\n                    this.emit('console write char', String.fromCharCode(value));\r\n                    return true;\r\n                case 0xf002:\r\n                    this.emit('console write int', utils.unsignedToSigned(value));\r\n                    return true;\r\n                default:\r\n                    // write on unauthorized location\r\n                    this.emit('run error', new Error('write on unauthorized location [' + address.toString(16) + '] = ' + value.toString(16)));\r\n                    await this.stop();\r\n                    return false;\r\n            }\r\n        };\r\n    }\r\n\r\n    readInputChar() {\r\n        if (this.inputBytes.length === 0) throw new Error('Empty input');\r\n        let byte = this.getNextInputByte();\r\n        return byte;\r\n    }\r\n    \r\n    readInputInt() {\r\n        if (this.inputBytes.length === 0) throw new Error('Empty input');\r\n        let zeroCharCode = '0'.charCodeAt(0);\r\n        let nineCharCode = '9'.charCodeAt(0);\r\n        let minusCharCode = '-'.charCodeAt(0);\r\n\r\n        function isMinusChar(c) {\r\n            return minusCharCode === c;\r\n        }\r\n\r\n        function isNumberChar(c) {\r\n            return c >= zeroCharCode && c <= nineCharCode;\r\n        }\r\n\r\n        function charToNumber(c) {\r\n            return c - zeroCharCode;\r\n        }\r\n\r\n        let int = 0;\r\n        let firstC = this.getNextInputByte();\r\n        if (isNumberChar(firstC) || isMinusChar(firstC)) {\r\n            if (isNumberChar(firstC)) {\r\n                int = charToNumber(firstC);\r\n            }\r\n\r\n            let length = this.inputBytes.length;\r\n            for (let i = 0; i < length; i++) {\r\n                let c = this.getNextInputByte();\r\n                if (isNumberChar(c)) {\r\n                    let number = charToNumber(c);\r\n                    int *= 10;\r\n                    int += number;\r\n                } else {\r\n                    if (c === 0) {\r\n                        this.getNextInputByte();\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (isMinusChar(firstC)) {\r\n                int *= -1;\r\n            }\r\n        } else {\r\n            // l os bytes do inputs at acabar ou at o byteWidth da arquitetura\r\n            // se o inputBytes tiver 1 byte e o byteWidth da arquitetura for 2 bytes, 16 bits, vai ler apenas 1 byte\r\n            // se o inputBytes tiver 5 bytes e o byteWidth da arquitetura for 2 bytes, vai ler apenas 2 bytes\r\n            int = firstC;\r\n            let length = Math.min(this.architecture.getByteWidth() - 1, this.inputBytes.length);\r\n            for (let i = 0; i < length; i++) {\r\n                let c = this.getNextInputByte();\r\n                this.emit('input buffer', this.inputBytes);\r\n                int = (int << 8) | c;\r\n            }\r\n        }\r\n        \r\n        return int;\r\n    }\r\n\r\n    setRawObjCode(rawObjCode) {\r\n        this.rawObjCode = rawObjCode;\r\n    }\r\n\r\n    async writeObjCodeMemory() {\r\n        if (!this.rawObjCode) return;\r\n        let wordArray = this.rawObjCode\r\n            .match(/.{1,4}/g)\r\n            .map(x => parseInt(x, 16));\r\n        for (let i = 0; i < wordArray.length; i++) {\r\n            let word = wordArray[i];\r\n            await this.memory.writeWord(i*2, word);\r\n        }\r\n\r\n        this.codeExecutionMaxPC = wordArray.length * 2;\r\n    }\r\n\r\n    async step() {\r\n        if (this.pc >= this.codeExecutionMaxPC) throw new Error('PC run out of program bounds');\r\n\r\n        let code = await this.memory.readWord(this.pc);\r\n        if (code === endSimulationCode) {\r\n            this.emit('run ended');\r\n            return await this.stop();\r\n        }\r\n\r\n        let instruction = Instruction.disassemble(code, this.architecture);\r\n        await instruction.execute(this);\r\n\r\n        this.incrementPC(2);\r\n        this.incrementCycles(1);\r\n        \r\n        if (this.breakpointHandler(this, this.pc)) {\r\n            this.emit('breakpoint', this, this.pc);\r\n            await this.stop();\r\n        }\r\n    }\r\n\r\n    async runner() {\r\n        this.emit('run started');\r\n        try {\r\n            while(!this.stopping) {\r\n                await this.step();\r\n                if (this.stepInterval > 0) await utils.sleep(this.stepInterval);\r\n            }\r\n        } catch (error) {\r\n            console.error(error);\r\n            this.emit('run error', error);\r\n        }\r\n        this.running = false;\r\n        this.stopping = false;\r\n    }\r\n\r\n    isRunning() {\r\n        return this.running;\r\n    }\r\n\r\n    isStopping() {\r\n        return this.stopping;\r\n    }\r\n\r\n    async stop() {\r\n        if (!this.running) throw new Error('Simulation already stopped');\r\n        if (this.stopping) throw new Error('Simulation already stopping');\r\n        this.stopping = true;\r\n        while(this.waitingInput) await utils.sleep(50);\r\n        clearTimeout(this.runId);\r\n        this.runId = null;\r\n    }\r\n\r\n    run() {\r\n        if (this.running) throw new Error('Simulation already running');\r\n        if (this.stopping) throw new Error('Simulation stopping');\r\n        this.running = true;\r\n        this.stopping = false;\r\n        this.runId = setTimeout(this.runner.bind(this));\r\n    }\r\n\r\n    getNextInputByte() {\r\n        let byte = this.inputBytes.shift();\r\n        this.emit('input buffer', this.inputBytes);\r\n        return byte;\r\n    }\r\n\r\n    resetInput() {\r\n        this.inputBytes.length = 0;\r\n        this.emit('input buffer', this.inputBytes);\r\n    }\r\n\r\n    addInput(inputBytes) {\r\n        for (let byte of inputBytes) \r\n            this.inputBytes.push(byte & 0xFF);\r\n        this.emit('input buffer', this.inputBytes);\r\n    }\r\n\r\n    getInput() {\r\n        return this.inputBytes;\r\n    }\r\n\r\n    getRegisterBank() {\r\n        return this.registerBank;\r\n    }\r\n\r\n    getMemory() {\r\n        return this.memory;\r\n    }\r\n\r\n    getCarry() {\r\n        return this.carry;\r\n    }\r\n\r\n    setCarry(carry) {\r\n        this.carry = carry;\r\n    }\r\n\r\n    setPC(pc) {\r\n        this.pc = (pc >>> 0) & this.architecture.getMask();\r\n        this.emit('pc update', this.pc);\r\n    }\r\n\r\n    incrementPC(value) {\r\n        this.setPC(this.getPC() + value);\r\n    }\r\n\r\n    getPC() {\r\n        return this.pc;\r\n    }\r\n    \r\n    setCycles(cycles) {\r\n        this.cycles = cycles;\r\n        this.emit('cycles update', this.cycles);\r\n    }\r\n\r\n    incrementCycles(value) {\r\n        this.cycles += value;\r\n        this.emit('cycles update', this.cycles);\r\n    }\r\n\r\n    getCycles() {\r\n        return this.cycles;\r\n    }\r\n\r\n    getArchitecture() {\r\n        return this.architecture;\r\n    }\r\n\r\n    setBreakpointHandler(handler) {\r\n        if (!handler) return this.breakpointHandler = defaultBreakpointHandler;\r\n        if (typeof handler != 'function') throw new Error('handler isnt function');\r\n        this.breakpointHandler = handler;\r\n    }\r\n\r\n    setStepInterval(ms) {\r\n        this.stepInterval = ms;\r\n    }\r\n\r\n    getStepInterval() {\r\n        return this.stepInterval;\r\n    }\r\n}","\r\nexport default class PseudoConverter {\r\n    constructor(pseudos) {\r\n        this.pseudos = pseudos;\r\n    }\r\n\r\n    convert(instruction, architecture) {\r\n        for (let pseudo of this.pseudos) {\r\n            let instructions = pseudo.getNonPseudoInstructions(instruction, architecture);\r\n            if (instructions.length > 0) {\r\n                for (let i = 0; i < instructions.length; i++) {\r\n                    let convInstruction = instructions[i];\r\n                    let convInstructions = this.convert(convInstruction, architecture);\r\n\r\n                    if (convInstructions.length > 0) {\r\n                        instructions.splice(i, 1, ...convInstructions);\r\n                    }\r\n                }\r\n                return instructions;\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n}","import Instruction from '../instruction';\r\n\r\nclass Disassembler {\r\n    constructor(architecture) {\r\n        this.architecture = architecture;\r\n    }\r\n\r\n    disassemble(rawHex) {\r\n        if (rawHex.length === 0) return [];\r\n\r\n        let result = [];\r\n        let arrayLiteral = rawHex\r\n            .match(/.{1,4}/g)\r\n            .map(x => parseInt(x, 16));\r\n        \r\n        let pc = 0;\r\n        for (let code of arrayLiteral) {\r\n            let instruction;\r\n            try {\r\n                instruction = Instruction.disassemble(code, this.architecture);\r\n            } catch (exc) { }\r\n\r\n            let value = instruction ? instruction.toString() : '????';\r\n\r\n            result.push({\r\n                instruction,\r\n                value,\r\n                pc,\r\n                code,\r\n            });\r\n\r\n            pc += 2;\r\n        }\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport default Disassembler;","import operationsManager from '../operations/operationsManager';\r\nimport Instruction from '../instruction';\r\nimport Operand from '../operand';\r\nimport utils from '../../utils';\r\n\r\nexport default class InstructionParser {\r\n\r\n    constructor(architecture) {\r\n        this.architecture = architecture;\r\n    }\r\n\r\n    isInstruction(str) {\r\n        try {\r\n            let operation = this.parseOperation(str);\r\n            return operation != null;\r\n        } catch (exc) {\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    parse(str) {\r\n        // parse operation & operands\r\n        let operation = this.parseOperation(str);\r\n        let operands = this.parseOperands(str);\r\n\r\n        let instruction = new Instruction(operation, operands);\r\n        return instruction;\r\n    }\r\n    \r\n\r\n    // detect if str is register\r\n    isRegisterName(str) {\r\n        return this.architecture.hasRegisterName(str);\r\n    }\r\n\r\n    // detect if str is operation\r\n    isOperationName(str) {\r\n        return operationsManager.isOperationName(str);\r\n    }\r\n\r\n    // parse operation\r\n    parseOperation(str) {\r\n        let match = str.match(/^(\\w*)[\\t ]*/);\r\n        if (!Array.isArray(match) || match.length < 2) throw new Error('Cant parse to operation');\r\n\r\n        let operationName = match[1];\r\n        if (!this.isOperationName(operationName)) throw new Error('\"' + operationName + '\" isnt operation');\r\n        \r\n        let operation = operationsManager.getOperationByName(operationName);\r\n        if (!operation) throw new Error('Operation with name \"' + operationName + '\" not found');\r\n\r\n        return operation;\r\n    }\r\n\r\n    // detect type of operand value\r\n    getInstructionOperandValueType(operandValue) {\r\n        if (typeof operandValue !== 'string') return null;\r\n        if (operandValue.length === 0) return null;\r\n\r\n        if (this.isRegisterName(operandValue)) return 'register';\r\n        if (utils.isInteger(operandValue)) return 'literal';\r\n        return 'symbol';\r\n    }\r\n    \r\n    // parse operands\r\n    parseOperands(str) {\r\n        let operands = [];\r\n\r\n        let match = str.match(/^\\w+[ \\t]+(.+)/);\r\n        if (Array.isArray(match) && match.length >= 2) {\r\n            let operandsStr = match[1];\r\n            let operandsValues = operandsStr.split(/[\\t ]*,[\\t ]*/);\r\n            for (let value of operandsValues) {\r\n                value = value.trim();\r\n                let type = this.getInstructionOperandValueType(value);\r\n                if (type === null) {\r\n                    throw new Error('Operand \"' + value + '\" cant be parsed');\r\n                }\r\n                if (type === Operand.LITERAL) {\r\n                    value = parseInt(value);\r\n                }\r\n                operands.push(new Operand(value, type));\r\n            }\r\n        }\r\n        \r\n        return operands;\r\n    }\r\n}","import utils from '../../utils';\r\nimport { unraw } from 'unraw';\r\n\r\nexport default class DataParser {\r\n    constructor(architecture) {\r\n        this.architecture = architecture;\r\n    }\r\n\r\n    parse(str) {\r\n        let byteWidth = this.architecture.getByteWidth();\r\n        let bytes = this.parseToBytes(str, byteWidth);\r\n        let data = this.bytesToData(bytes, byteWidth);\r\n        return data;\r\n    }\r\n\r\n    parseToBytes(str, byteWidth) {\r\n        let bytes = [];\r\n        let values = extractValues(str);\r\n        for (let { type, value } of values) {\r\n            switch (type) {\r\n                case 'text':\r\n                    for (let i = 0; i < value.length; i++) {\r\n                        bytes.push(value.charCodeAt(i));\r\n                    }\r\n                    bytes.push(0);\r\n                    break;\r\n                case 'others':\r\n                    let trimmed = value.trim();\r\n                    if (trimmed.length <= 0) break;\r\n\r\n                    let splitted = trimmed.split(/(?:[?: \\t]+)|,/);\r\n                    if (splitted.some(x => !utils.isInteger(x))) throw new Error('Data contains a non-literal');\r\n                    bytes.push( ...splitted.reduce( (a, b) => a.concat(utils.numberToBytes(parseInt(b), byteWidth)), [] ) );\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n        return bytes;\r\n    }\r\n\r\n    bytesToData(bytes, byteWidth) {\r\n        let data = [];\r\n        for (let i = 0; i < bytes.length; i += byteWidth) {\r\n            let curBytes = new Array(byteWidth).fill(0);\r\n            for (let j = 0; j < byteWidth; j++) {\r\n                let byte = bytes[i + j];\r\n                curBytes[j] = byte ? byte : 0;\r\n            }\r\n            data.push(utils.bytesToNumber(curBytes));\r\n        }\r\n        return data;\r\n    }\r\n}\r\n\r\nfunction extractValues(str) {\r\n    let lastC;\r\n    let startIndex = 0;\r\n    let capturingQuote = false;\r\n\r\n    let values = [];\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str[i];\r\n\r\n        if ((c === '\"' && lastC !== '\\\\')) {            \r\n            if (capturingQuote) {\r\n                if (startIndex !== i) values.push({\r\n                    type: 'text',\r\n                    value: unraw(str.substring(startIndex, i)),\r\n                });\r\n                capturingQuote = false;\r\n                startIndex = i + 1;\r\n            } else {\r\n                capturingQuote = true;\r\n                if (startIndex !== i) values.push({\r\n                    type: 'others',\r\n                    value: str.substring(startIndex, i),\r\n                });\r\n                startIndex = i + 1;\r\n            }\r\n        }\r\n        lastC = c;\r\n    }\r\n    if (startIndex !== str.length) values.push({\r\n        type: 'others',\r\n        value: str.substring(startIndex, str.length),\r\n    });\r\n    return values;\r\n}","export default class CommentParser {\r\n    parse(str) {\r\n        let result = {\r\n            isComment: false,\r\n            comment: null,\r\n        };\r\n        let matches = str.match(/^[ \\t]*;|(?:\\/\\/)(.*)/);\r\n        if (Array.isArray(matches) && matches.length === 2) {\r\n            result.isComment = true;\r\n            result.comment = matches[1];\r\n        }\r\n        return result;\r\n    }\r\n};","export default class LineParser {\r\n\r\n    constructor(instructionParser, dataParser, commentParser) {\r\n        this.instructionParser = instructionParser;\r\n        this.dataParser = dataParser;\r\n        this.commentParser = commentParser;\r\n    }\r\n\r\n    getSymbolAndRest(str) {\r\n        let symbol;\r\n        let rest;\r\n\r\n        let match = str.match(/^(\\w*)[\\t ]*(.*)/);\r\n        if (Array.isArray(match) && match.length >= 3) {\r\n            symbol = match[1];\r\n            rest = match[2];\r\n\r\n            if (symbol.length === 0) symbol = null;\r\n        } else {\r\n            throw new Error('Cant parse line to symbol and rest');\r\n        }\r\n        \r\n        return { symbol, rest };\r\n    }\r\n\r\n    parse(line) {\r\n        let { symbol, rest } = this.getSymbolAndRest(line);\r\n        let sanitizedRest = rest.trim();\r\n\r\n        let instruction = null;\r\n        let data = null;\r\n        let { isComment, comment } = this.commentParser.parse(rest);\r\n\r\n        if (!isComment) {\r\n            if (sanitizedRest.length > 0) {\r\n                if (this.instructionParser.isInstruction(sanitizedRest)) {\r\n                    instruction = this.instructionParser.parse(sanitizedRest);\r\n                } else {\r\n                    data = this.dataParser.parse(sanitizedRest);\r\n                }\r\n            }\r\n        }\r\n\r\n        return { isComment, comment, symbol, instruction, data };\r\n    }\r\n}","import Operand from '../operand';\r\nimport InstructionParser from './instructionParser';\r\nimport DataParser from './dataParser';\r\nimport CommentParser from './commentParser';\r\nimport LineParser from './lineParser';\r\nimport utils from '../../utils';\r\n\r\nclass Assembler {\r\n    constructor(architecture, programData, pseudoConverter) {\r\n        this.architecture = architecture;\r\n        this.programData = programData;\r\n        this.pseudoConverter = pseudoConverter;\r\n        \r\n        this.lines = this.programData.split('\\n');\r\n        \r\n        this.sequence = [];\r\n        this.symbolTable = {};\r\n        this.objectCodeArray = [];\r\n        this.instructions = [];\r\n    }\r\n\r\n    assemble() {\r\n        this.pass1();\r\n        this.pass2();\r\n        this.pass3();\r\n        \r\n        return {\r\n            rawObjectCode: this.rawObjectCode,\r\n            objectCodeArray: this.objectCodeArray,\r\n            symbolTable: this.symbolTable,\r\n            instructions: this.instructions,\r\n        };\r\n    }\r\n\r\n    // Process instructions, pseudo-instructions, symbols.\r\n    // Doesnt substitute symbols in instructions.\r\n    pass1() {\r\n        let pc = 0;\r\n\r\n        let instructionParser = new InstructionParser(this.architecture);\r\n        let dataParser = new DataParser(this.architecture);\r\n        let commentParser = new CommentParser();\r\n        let lineParser = new LineParser(instructionParser, dataParser, commentParser);\r\n\r\n        for (let i = 0; i < this.lines.length; i++) {\r\n            let line = this.lines[i];\r\n\r\n            let parsed;\r\n            try {\r\n                parsed = lineParser.parse(line);\r\n            } catch (exc) {\r\n                console.error(exc);\r\n                throw new Error('Cant parse line ' + (i+1) + ' \"' + line.trim() + '\": ' + exc.message);\r\n            }\r\n            let { isComment, symbol, instruction, data } = parsed;\r\n\r\n            if (isComment) continue;\r\n\r\n            if (symbol) {\r\n                this.symbolTable[symbol] = pc;\r\n            }\r\n            if (data) {\r\n                this.sequence.push(...data);\r\n                pc += 2 * data.length;\r\n            }\r\n            if (instruction) {\r\n                // process pseudo instructions\r\n                if (instruction.isPseudo()) {\r\n                    let convInstructions = this.pseudoConverter.convert(instruction, this.architecture);\r\n                    if (convInstructions != null && convInstructions.length > 0) {\r\n                        this.instructions.push(...convInstructions);\r\n                        this.sequence.push(...convInstructions);\r\n                        pc += 2 * convInstructions.length;\r\n                    } else {\r\n                        throw new Error('The pseudo instruction on line ' + (i+1) + ' \"' + line.trim() + '\" doesnt exist');\r\n                    }\r\n                } else {\r\n                    this.instructions.push(instruction);\r\n                    this.sequence.push(instruction);\r\n                    pc += 2;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Substitute symbols with their values\r\n    pass2() {\r\n        for (let instruction of this.instructions) {\r\n            let operands = instruction.getOperands();\r\n            for (let operand of operands) {\r\n                if (operand.getType() === Operand.SYMBOL) {\r\n                    let symbolValue = this.symbolTable[operand.getValue()];\r\n                    if (symbolValue == null) throw new Error('The symbol \"' + operand.getValue() + '\" doesnt exist');\r\n                    let finalValue = 0;\r\n                    for (let i = operand.getByteRange().min; i <= operand.getByteRange().max; i++) {\r\n                        finalValue <<= 2;\r\n                        finalValue |= (symbolValue >> (this.architecture.getBitWidth() - (8 * (i + 1)))) & 0xFF;\r\n                    }\r\n                    operand.setType(Operand.LITERAL);\r\n                    operand.setValue(finalValue);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Assemble object code\r\n    pass3() {\r\n        // Assemble\r\n        for (let item of this.sequence) {     \r\n            if (Number.isInteger(item)) {\r\n                this.objectCodeArray.push(item);\r\n            } else {\r\n                this.objectCodeArray.push(item.assemble(this.architecture));\r\n            }\r\n        }\r\n        \r\n        this.rawObjectCode = this.objectCodeArray\r\n            .map(x => utils.signedNumberToHex(x, 2))\r\n            .join('');\r\n    }\r\n};\r\n\r\nexport default Assembler;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Simulator_container__1Th6t\",\"rightArea\":\"Simulator_rightArea__3sIft\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"program\":\"Program_program__3jneg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__2U2M-\"};","import styles from './Simulator.module.css'\r\nimport { Box } from \"@material-ui/core\";\r\nimport { Component, createRef } from 'react';\r\nimport Registers from '../registers/Registers.module';\r\nimport Memory from '../../business/asm/simulator/memory';\r\nimport architectureManager from '../../business/asm/architectureManager';\r\nimport RegisterBank from '../../business/asm/simulator/registerBank';\r\nimport Simulation from '../../business/asm/simulator/simulation';\r\nimport pseudoManager from '../../business/asm/pseudoInstructionConversions/pseudoManager';\r\nimport PseudoConverter from '../../business/asm/pseudoInstructionConversions/pseudoConverter';\r\nimport Assembler from '../../business/asm/assembler/assembler';\r\nimport Disassembler from '../../business/asm/disassembler/disassembler';\r\n// eslint-disable-next-line\r\nimport asm from '../../business/index';\r\nimport Program from '../program/Program.module';\r\nimport SymbolTable from '../symbolTable/SymbolTable.module';\r\nimport Control from '../control/Control.module';\r\nimport Console from '../console/Console.module';\r\nimport Assembled from '../assembled/Assembled.module';\r\n\r\nclass Simulator extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.programRef = createRef();\r\n\t\tthis.assembledRef = createRef();\r\n\t\tthis.symbolTableRef = createRef();\r\n\t\tthis.consoleRef = createRef();\r\n\r\n\t\tthis.curArchitecture = architectureManager.getViking16Arch();\r\n\t\tthis.memory = Memory.createFromArchitecture(this.curArchitecture);\r\n\t\tthis.registerBank = RegisterBank.createFromArchitecture(this.curArchitecture);\r\n\t\tthis.simulation = new Simulation(this.curArchitecture, this.memory, this.registerBank);\r\n\r\n\t\tthis.state = {\r\n\t\t\tstepDelay: 50,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentWillMount() {\r\n\t\tthis.simulationOnRunErrorHandler = (error) => {\r\n\t\t\tthis.consoleRef.current.writeLine('');\r\n\t\t\tthis.consoleRef.current.writeLine('[Error | Simulation] ' + error.message);\r\n\t\t};\r\n\t\t\r\n\t\tthis.simulationOnRunEndedHandler = () => {\r\n\t\t\tthis.consoleRef.current.writeLine('');\r\n\t\t\tthis.consoleRef.current.writeLine('[Info | Simulation] run ended.');\r\n\t\t};\r\n\t\t\r\n\t\tthis.simulationOnBreakpointHandler = (pc) => {\r\n\t\t\tthis.consoleRef.current.writeLine('');\r\n\t\t\tthis.consoleRef.current.writeLine('[Info | Simulation] breakpoint at PC=' + pc.toString(16));\r\n\t\t};\r\n\t\t\r\n\t\tthis.simulationWriteCharHandler = (char) => {\r\n\t\t\tif (char.charCodeAt(0) !== 0) {\r\n\t\t\t\tthis.consoleRef.current.write(char);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tthis.simulationWriteIntHandler = (int) => {\r\n\t\t\tthis.consoleRef.current.write(String(int));\r\n\t\t};\r\n\r\n\t\tthis.simulation.on('run error', this.simulationOnRunErrorHandler);\r\n\t\tthis.simulation.on('run ended', this.simulationOnRunEndedHandler);\r\n\t\tthis.simulation.on('breakpoint', this.simulationOnBreakpointHandler);\r\n\t\tthis.simulation.on('console write char', this.simulationWriteCharHandler);\r\n\t\tthis.simulation.on('console write int', this.simulationWriteIntHandler);\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.simulation.off('run error', this.simulationOnRunErrorHandler);\r\n\t\tthis.simulation.off('run ended', this.simulationOnRunEndedHandler);\r\n\t\tthis.simulation.off('breakpoint', this.simulationOnBreakpointHandler);\r\n\t\tthis.simulation.off('console write char', this.simulationWriteCharHandler);\r\n\t\tthis.simulation.off('console write int', this.simulationWriteIntHandler);\r\n\t}\r\n\r\n\tasync assemble() {\r\n\t\tlet programData = this.programRef.current.getText();\r\n\t\ttry {\r\n\t\t\tlet pseudoInstructions = pseudoManager.getPseudoInstructions();\r\n\t\t\tlet pseudoConverter = new PseudoConverter(pseudoInstructions);\r\n\r\n\t\t\tlet assembler = new Assembler(this.curArchitecture, programData, pseudoConverter);\r\n\t\t\tlet assemblerResult = assembler.assemble();\r\n\r\n\t\t\tlet disassembler = new Disassembler(this.curArchitecture);\r\n\t\t\tlet disassemblerResult = disassembler.disassemble(assemblerResult.rawObjectCode);\r\n\r\n\t\t\tlet { symbolTable } = assemblerResult;\r\n\t\t\tlet disassembly = disassemblerResult.map(x => ({value: x.value, pc: x.pc, code: x.code}) );\r\n\r\n\t\t\tlet result = { symbolTable, disassembly };\r\n\r\n\t\t\tthis.simulation.setRawObjCode(assemblerResult.rawObjectCode);\r\n\t\t\tawait this.simulation.reset();\r\n\r\n\t\t\tthis.assembledRef.current.setAssembled(result.disassembly.map(x => x.value).join('\\n'));\r\n\t\t\tthis.symbolTableRef.current.setSymbolTable(symbolTable);\r\n\t\t\tthis.consoleRef.current.writeLine('[Info | Assembler] Successfully assembled');\r\n\r\n\t\t\treturn result;\r\n\t\t} catch (exc) {\r\n\t\t\t\tconsole.error(exc);\r\n\t\t\t\tthis.consoleRef.current.writeLine('[Error | Assembler] ' + exc.message);\r\n\t\t}\r\n\t}\r\n\r\n\tonInput(text) {\r\n\t\tlet inputBytes = new Array(text.length + 1);\r\n\t\tlet buffer = Buffer.from(text);\r\n\t\tfor (let i = 0; i < text.length; i++) {\r\n\t\t\t\tinputBytes[i] = buffer[i];\r\n\t\t}\r\n\t\t// Add \\0 byte on end\r\n\t\tinputBytes[text.length] = 0;\r\n\t\tthis.simulation.addInput(inputBytes);\r\n\t}\r\n\r\n\tonAssemble() {\r\n\t\tthis.assemble();\r\n\t}\r\n\t\r\n\tonControlError(exc) {\r\n\t\tthis.consoleRef.current.writeLine(exc);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={styles.container}>\r\n\t\t\t\t<Box display=\"flex\" flexDirection=\"column\" width=\"100%\" height=\"100%\">\r\n\t\t\t\t\t<Box display=\"flex\" flexDirection=\"row\" flex=\"1\" overflow=\"auto\">\r\n\t\t\t\t\t\t<Program curArchitecture={this.curArchitecture} ref={this.programRef} />\r\n\t\t\t\t\t\t<Assembled simulation={this.simulation} ref={this.assembledRef} />\r\n\t\t\t\t\t\t<SymbolTable ref={this.symbolTableRef} />\r\n\t\t\t\t\t\t<Box className={styles.rightArea} display=\"flex\" flexDirection=\"column\" justifyContent=\"space-between\" flex=\"1\" overflow=\"auto\">\r\n\t\t\t\t\t\t\t<Registers simulation={this.simulation} registerBank={this.registerBank} />\r\n\t\t\t\t\t\t\t<Control simulation={this.simulation} onAssemble={this.onAssemble.bind(this)} onError={this.onControlError.bind(this)} />\r\n\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t</Box>\r\n\t\t\t\t\t<Console simulation={this.simulation} onInput={this.onInput.bind(this)} ref={this.consoleRef} />\r\n\t\t\t\t</Box>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Simulator;\r\n","import styles from './Registers.module.css';\r\nimport { Component } from \"react\";\r\nimport utils from '../../utils';\r\n\r\nclass Registers extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (!props.registerBank) throw new Error('props.registerBank null');\r\n    if (!props.simulation) throw new Error('props.simulation null');\r\n\r\n    this.registerBank = props.registerBank;\r\n    this.simulation = props.simulation;\r\n\r\n    this.registerInfos = Object.entries(this.registerBank.getRegisterInfos());\r\n    \r\n    this.state = { };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let self = this;\r\n    this.valueUpdateHandler = utils.callLimiter(() => {\r\n      self.setState({});\r\n    }, 50);\r\n    this.registerBank.on('value update', this.valueUpdateHandler);\r\n    this.simulation.on('pc update', this.valueUpdateHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.registerBank.off('value update', this.valueUpdateHandler);\r\n    this.simulation.off('pc update', this.valueUpdateHandler);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.title}>Registers</div>\r\n        \r\n        <div className={styles.content}>\r\n          <div className={styles.generalRegisterList}>\r\n            { this.registerInfos.map(([name, infos], i) => <Register key={i} name={name} aliases={infos.aliases} value={this.registerBank.getUValue(name)} />) }\r\n          </div>\r\n          \r\n          <div className={styles.pcRegister}>\r\n            <Register name=\"pc\" aliases={[]} value={this.simulation.getPC()} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Register extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.props = props;\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className={styles.registerContainer}>\r\n        <div>{this.props.name}{this.props.aliases.length > 0 ? (' (' + this.props.aliases.join(',') + ')') : ''}</div>\r\n        <div>{this.props.value.toString(16).padStart(4, '0')}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Registers;","import { Box } from '@material-ui/core';\r\nimport Editor from '@monaco-editor/react';\r\nimport { Component } from 'react';\r\nimport operationsManager from '../../business/asm/operations/operationsManager';\r\nimport styles from './Program.module.css'\r\n\r\nconst defaultProgramData =\r\n`main\r\n    ldw\tsr,writec\r\n    ldi\tr4,str\r\n    ldi\tr3,loop\r\nloop\r\n    ldb\tr2,r4\r\n    stw\tr2,sr\r\n    add\tr4,1\r\n    bnz\tr2,r3\r\n    hcf\r\n\r\nwritec\t0xf000\r\nstr\t\"hello world!\"`;\r\n\r\nlet alreadyCreatedLang = false;\r\n\r\nclass Program extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (props.curArchitecture == null) throw new Error('props.curArchitecture null');\r\n\r\n    this.opsNames = operationsManager.getOperationNames();\r\n    this.regNames = props.curArchitecture.getRegisterNames();\r\n\r\n    this.state = {  }\r\n  }\r\n\r\n  onEditorWillMount(monaco) {\r\n    this.monaco = monaco;\r\n\r\n    if (alreadyCreatedLang) return;\r\n    alreadyCreatedLang = true;\r\n\r\n    monaco.languages.register({ id: 'vikingAsm' });\r\n        \r\n    monaco.languages.setMonarchTokensProvider('vikingAsm', {\r\n\r\n      operationKeywords: this.opsNames,\r\n      registerKeywords: this.regNames,\r\n\r\n      decimalNumbers: /\\d+/,\r\n      hexNumbers: /(?:0x|0B)[\\da-fA-F]+/,\r\n      \r\n      escapes: /\\\\(?:[abfnrtv\\\\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,\r\n\r\n      tokenizer: {\r\n        root: [\r\n          [ /\\b@hexNumbers|@decimalNumbers\\b/i, 'number' ],\r\n          [\r\n            /\\b\\w+\\b/,\r\n            {\r\n              cases: {\r\n                '@operationKeywords': 'operationKeywords',\r\n                '@registerKeywords': 'registersKeyWords',\r\n                '@default': 'symbols',\r\n              },\r\n            },\r\n          ],\r\n\r\n          [/^[ \\t]*(?:(?:\\/\\/)|;).*$/,    'comment'],\r\n\r\n          // strings\r\n          [/\"([^\"\\\\]|\\\\.)*$/, 'string.invalid' ],  // non-teminated string\r\n          [/\"/, { token: 'string.quote', bracket: '@open', next: '@string' } ],\r\n        ],\r\n        string: [\r\n          [/[^\\\\\"]+/,  'string'],\r\n          [/@escapes/, 'string.escape'],\r\n          [/\\\\./,      'string.escape.invalid'],\r\n          [/\"/,        { token: 'string.quote', bracket: '@close', next: '@pop' } ]\r\n        ],\r\n      },\r\n    });\r\n\r\n    monaco.languages.registerCompletionItemProvider('vikingAsm', {\r\n      provideCompletionItems: () => {\r\n        let suggestions = this.opsNames.map(opName => ({\r\n          label: opName,\r\n          detail: '...',\r\n          documentation: '...',\r\n          kind: monaco.languages.CompletionItemKind.Function,\r\n          insertText: opName,\r\n        }));\r\n        return { suggestions: suggestions };\r\n      }\r\n    });\r\n    \r\n    monaco.editor.defineTheme('vikinAsmTheme', {\r\n      base: 'vs-dark',\r\n      inherit: true,\r\n      rules: [\r\n        { token: 'operationKeywords', foreground: 'e55283' },\r\n        { token: 'registersKeyWords', foreground: 'ffc100' },\r\n        { token: 'symbols', foreground: '92db57' },\r\n        { token: 'number', foreground: '7d81ea' }\r\n      ],\r\n    });\r\n  }\r\n\r\n  onEditorMount(editor, monaco) {\r\n    this.editor = editor;\r\n    // Nothing\r\n  }\r\n\r\n  getText() {\r\n    return this.editor.getValue();\r\n  }\r\n\r\n  setText(text) {\r\n    this.editor.setValue(text);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Box\r\n        className={styles.program} \r\n        display=\"flex\" \r\n        flexDirection=\"column\" \r\n        flex=\"1\" \r\n        overflow=\"hidden\"\r\n      >\r\n        <div className='areaTitle'>Program</div>\r\n        <Editor\r\n          className={styles.program}\r\n          display=\"flex\"\r\n          flex=\"1\"\r\n          overflow=\"hidden\"\r\n          \r\n          language='vikingAsm'\r\n          theme='vikinAsmTheme'\r\n          value={defaultProgramData}\r\n\r\n          beforeMount={this.onEditorWillMount.bind(this)}\r\n          onMount={this.onEditorMount.bind(this)}\r\n        />\r\n      </Box>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Program;","import { DataGrid, GridDensityTypes } from '@material-ui/data-grid';\r\nimport { Component } from 'react';\r\nimport styles from './SymbolTable.module.css'\r\n\r\nclass SymbolTable extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.columns = [\r\n      {\r\n        field: 'symbolName',\r\n        headerName: 'Name',\r\n      },\r\n      {\r\n        field: 'symbolValue',\r\n        headerName: 'Value',\r\n      },\r\n    ];\r\n\r\n    this.state = {\r\n      rows: [],\r\n    }\r\n  }\r\n\r\n  setSymbolTable(symbolTable) {\r\n    let newRows = Object.entries(symbolTable).map(([symbolName, symbolValue], id) => Object.assign({ id }, {symbolName, symbolValue}));\r\n    this.setState({ rows: newRows });\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.title}>Symbol Table</div>\r\n        <div className={styles.gridContainer}>\r\n          {\r\n            this.state.rows.length > 0 ? (\r\n              <DataGrid\r\n                classes={{root: styles.root}}\r\n                getRowClassName={() => styles.row}\r\n                getCellClassName={() => styles.cell}\r\n                rows={this.state.rows}\r\n                columns={this.columns}\r\n                disableDensitySelector={false}\r\n                disableColumnMenu={true}\r\n                disableColumnSelector={true}\r\n                hideFooter={true}\r\n                hideFooterPagination={true}\r\n                hideFooterRowCount={true}\r\n                hideFooterSelectedRowCount={true}\r\n                showCellRightBorder={false}\r\n                showColumnRightBorder={false}\r\n                headerHeight={0}\r\n                density={GridDensityTypes.Compact}\r\n              />\r\n            ) : ( <div/> )\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default SymbolTable;","import { Component } from 'react';\r\nimport utils from '../../utils';\r\nimport styles from './Control.module.css';\r\n\r\nclass Control extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.simulation = props.simulation;\r\n    this.onAssemble = typeof props.onAssemble === 'function' ? props.onAssemble : ()=>{};\r\n    this.onError = typeof props.onError === 'function' ? props.onError : ()=>{};\r\n\r\n    this.state = {  }\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.cyclesUpdateHandler = utils.callLimiter((cycles) => {\r\n      this.setState({});\r\n    }, 50);\r\n    this.simulation.on('cycles update', this.cyclesUpdateHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.simulation.off('cycles update', this.cyclesUpdateHandler);\r\n  }\r\n\r\n  stepIntervalChanged(e) {\r\n    let value = parseInt(e.target.value);\r\n    if (isNaN(value)) value = 50;\r\n    this.simulation.setStepInterval(value);\r\n    this.setState({});\r\n  }\r\n\r\n  async assembleClick() {\r\n    await this.onAssemble();\r\n  }\r\n  \r\n  async resetClick() {\r\n    try {\r\n      await this.simulation.reset();\r\n    } catch (exc) {\r\n      this.onError(exc);\r\n    }\r\n  }\r\n  \r\n  async stopClick() {\r\n    try {\r\n      await this.simulation.stop();\r\n    } catch (exc) {\r\n      this.onError(exc);\r\n    }\r\n  }\r\n  \r\n  async runClick() {\r\n    await this.callH\r\n    try {\r\n      await this.simulation.run();\r\n    } catch (exc) {\r\n      this.onError(exc);\r\n    }\r\n  }\r\n  \r\n  async stepClick() {\r\n    try {\r\n      await this.simulation.step();\r\n    } catch (exc) {\r\n      this.onError(exc);\r\n    }\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.title}>Control</div>\r\n\r\n        <div className={styles.content}>\r\n          <div className={styles.cycleArea}>\r\n            <div className={styles.cycleLabel}>Cycle:</div>\r\n            <div>{this.simulation.getCycles()}</div>\r\n          </div>\r\n          \r\n          <button className={styles.btn} onClick={this.assembleClick.bind(this)}>Assemble</button>\r\n          <button className={styles.btn} onClick={this.resetClick.bind(this)}>Reset</button>\r\n          <button className={styles.btn} onClick={this.stopClick.bind(this)}>Stop</button>\r\n          <button className={styles.btn} onClick={this.runClick.bind(this)}>Run</button>\r\n          <button className={styles.btn} onClick={this.stepClick.bind(this)}>Step</button>\r\n\r\n          <div className={styles.delayLabel}>Delay (ms):</div>\r\n          <input className={styles.delayInput} type='number' value={this.simulation.getStepInterval()} onChange={this.stepIntervalChanged.bind(this)} min=\"0\" max=\"1000\" />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Control;","import { Component, createRef } from \"react\";\r\nimport styles from './Console.module.css';\r\n\r\nclass Console extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (!props.simulation) throw new Error('props.simulation null');\r\n    \r\n    this.simulation = props.simulation;\r\n    this.onInput = typeof props.onInput === 'function' ? props.onInput : ()=>{};\r\n    this.outputRef = createRef();\r\n\r\n    this.state = {  }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.simulationInBufHandler = (inputBuffer) => {\r\n      this.setInputBuffer(inputBuffer);\r\n    };\r\n\r\n    this.simulation.on('input buffer', this.simulationInBufHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.simulation.off('input buffer', this.simulationInBufHandler);\r\n  }\r\n\r\n  setInputBuffer(inputBuffer) {\r\n    this.setState({});\r\n  }\r\n\r\n  write(text) {\r\n    this.outputRef.current.value += text;\r\n    this.outputRef.current.scrollTop = this.outputRef.current.scrollHeight;\r\n  }\r\n\r\n  writeLine(text) {\r\n    this.outputRef.current.value += text + '\\n';\r\n    this.outputRef.current.scrollTop = this.outputRef.current.scrollHeight;\r\n  }\r\n\r\n  inputKeyDown(e) {\r\n    if (e.key.toLowerCase() === 'enter') {\r\n      let text = e.target.value;\r\n      if (text.length > 0) {\r\n        e.target.value = '';\r\n        this.onInput(text);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() { \r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.outAndInBufContainer}>\r\n          <div className={styles.output}>\r\n            <textarea readOnly spellCheck='false' ref={this.outputRef}></textarea>\r\n          </div>\r\n          <div className={styles.inputBuffer}>\r\n            <div className={styles.title}>Input Buffer</div>\r\n            <textarea readOnly spellCheck='false' value={this.simulation.getInput().map(x => x.toString(16).padStart(2, '0')).join(' ')}></textarea>\r\n          </div>\r\n        </div>\r\n        <input className={styles.inputText} placeholder=\"input...\" id='inputText' onKeyDown={this.inputKeyDown.bind(this)}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Console;","import { Component } from \"react\";\r\nimport Editor from \"@monaco-editor/react\";\r\nimport styles from './Assembled.module.css';\r\nimport utils from \"../../utils\";\r\n\r\nconst GUTTER_GLYPH_MARGIN = 2;\r\n\r\nclass Assembled extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if (props.simulation == null) throw new Error('props.simulation null');\r\n    \r\n    this.simulation = props.simulation;\r\n    this.onBreakpoint = typeof props.onBreakpoint === 'function' ? props.onBreakpoint : ()=>{};\r\n    \r\n    this.breakpointDecorations = {};\r\n    this.breakpoints = new Set();\r\n    this.curLineRunningDecorationId = null;\r\n    this.curLineRunningDecoration = null;\r\n    this.monaco = null;\r\n    this.editor = null;\r\n\r\n    this.state = {  };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.simulation.setBreakpointHandler((simulation, pc) => {\r\n      return this.breakpoints.has(pc);\r\n    });\r\n\r\n    this.pcUpdateHandler = utils.callLimiter((pc) => {\r\n      this.setLineRunning(pc/2+1);\r\n    }, 20);\r\n    this.simulationResetHandler = (pc) => {\r\n      this.removeAllBreakpoints();\r\n    };\r\n    this.simulation.on('reset', this.simulationResetHandler);\r\n    this.simulation.on('pc update', this.pcUpdateHandler);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.simulation.off('reset', this.simulationResetHandler);\r\n    this.simulation.off('pc update', this.pcUpdateHandler);\r\n  }\r\n\r\n  async setBreakpoints(breakpointList) {\r\n    this.removeAllBreakpoints();\r\n    for (let pc of breakpointList) {\r\n      this.setBreakpoint(pc);\r\n    }\r\n  }\r\n  \r\n  setBreakpoint(pc) {\r\n    let lineNumber = pc / 2 + 1;\r\n    \r\n    let lineCount = this.editor.getModel().getLineCount();\r\n    if (lineNumber <= 0 || lineNumber > lineCount) return;\r\n\r\n    let bpDec = this.breakpointDecorations[pc];\r\n    if (bpDec) return;\r\n    \r\n    bpDec = this.editor.deltaDecorations([], [\r\n      {\r\n        range: new this.monaco.Range(lineNumber, 1, lineNumber, 1),\r\n        options: {\r\n          isWholeLine: false,\r\n          glyphMarginClassName: styles.breakpoint,\r\n        },\r\n      },\r\n    ]);\r\n    this.breakpoints.add(pc);\r\n    this.breakpointDecorations[pc] = bpDec;\r\n    this.onBreakpoint(pc, true);\r\n  }\r\n\r\n  removeBreakpoint(pc) {\r\n    let bpDec = this.breakpointDecorations[pc];\r\n    if (bpDec) {\r\n      delete this.breakpointDecorations[pc];\r\n      this.editor.deltaDecorations(bpDec, []);\r\n    }\r\n    this.breakpoints.delete(pc);\r\n    this.onBreakpoint(pc, false);\r\n  }\r\n\r\n  removeAllBreakpoints() {\r\n    for (let pc of this.breakpoints) {\r\n      this.removeBreakpoint(pc);\r\n    }\r\n  }\r\n\r\n  toggleBreakpoint(pc) {\r\n    let bpDec = this.breakpointDecorations[pc];\r\n    if (bpDec) {\r\n      this.removeBreakpoint(pc);\r\n    } else {\r\n      this.setBreakpoint(pc);\r\n    }\r\n  }\r\n\r\n  setAssembled(text) {\r\n    this.editor.setValue(text);\r\n  }\r\n\r\n  setLineRunning(lineNumber) {\r\n    let lineCount = this.editor.getModel().getLineCount();\r\n    if (lineNumber <= 0 || lineNumber > lineCount) {\r\n      this.curLineRunningDecoration = [];\r\n    } else {\r\n      this.curLineRunningDecoration = [\r\n        {\r\n          range: new this.monaco.Range(lineNumber, 1, lineNumber, 1),\r\n          options: {\r\n            isWholeLine: true,\r\n            className: styles.currentLineRunning,\r\n          }\r\n        }\r\n      ];\r\n      this.editor.revealLine(lineNumber);\r\n    }\r\n\r\n    let oldDec = this.curLineRunningDecorationId ? this.curLineRunningDecorationId : [];\r\n    this.curLineRunningDecorationId = this.editor.deltaDecorations(oldDec, this.curLineRunningDecoration);\r\n  }\r\n\r\n\tonEditorMount(editor, monaco) {\r\n\t\tthis.editor = editor;\r\n    this.monaco = monaco;\r\n\r\n\t\tlet self = this;\r\n\t\tthis.editor.updateOptions({\r\n\t\t\twordBasedSuggestions: false,\r\n\t\t\tautomaticLayout: true,\r\n\t\t\tlineDecorationsWidth: 0,\r\n\t\t\tglyphMargin: true,\r\n\t\t\tminimap: {\r\n\t\t\t\tenabled: false,\r\n\t\t\t},\r\n\t\t\tlineNumbers: (n) => ((n-1)*2).toString(16).padStart(4, '0'),\r\n\t\t\treadOnly: true,\r\n\t\t});\r\n\t\t\r\n\t\tthis.editor.onMouseDown(async (e) => {\r\n\t\t\tlet { target: { type, position: { lineNumber } } } = e;\r\n\t\t\tif (type !== GUTTER_GLYPH_MARGIN) return;\r\n\t\t\tlet pc = (lineNumber - 1) * 2;\r\n\t\t\tawait self.toggleBreakpoint(pc);\r\n\t\t});\r\n\t}\r\n\r\n  render() { \r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.title}>Disassembly</div>\r\n        <Editor\r\n          className={styles.editor}\r\n          language='vikingAsm'\r\n          theme='vikinAsmTheme'\r\n          onMount={this.onEditorMount.bind(this)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Assembled;","var map = {\n\t\"./basic/adc.js\": 178,\n\t\"./basic/add.js\": 179,\n\t\"./basic/and.js\": 180,\n\t\"./basic/asr.js\": 181,\n\t\"./basic/bez.js\": 182,\n\t\"./basic/bnz.js\": 183,\n\t\"./basic/ldb.js\": 184,\n\t\"./basic/ldc.js\": 185,\n\t\"./basic/ldr.js\": 186,\n\t\"./basic/ldw.js\": 187,\n\t\"./basic/lsr.js\": 188,\n\t\"./basic/or.js\": 189,\n\t\"./basic/ror.js\": 190,\n\t\"./basic/sbc.js\": 191,\n\t\"./basic/slt.js\": 192,\n\t\"./basic/sltu.js\": 193,\n\t\"./basic/stb.js\": 194,\n\t\"./basic/stw.js\": 195,\n\t\"./basic/sub.js\": 196,\n\t\"./basic/xor.js\": 197\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 177;","const adc = {\r\n    getName() {\r\n        return 'adc';\r\n    },\r\n    getOpcode() {\r\n        return 0x5001;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let carry = simulation.getCarry();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) + registerBank.getValue(rsb) + carry,\r\n        );\r\n    },\r\n}\r\n\r\nexport default adc;","const add = {\r\n    getName() {\r\n        return 'add';\r\n    },\r\n    getOpcode() {\r\n        return 0x5000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) + registerBank.getValue(rsb),\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rst) + immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default add;","const and = {\r\n    getName() {\r\n        return 'and';\r\n    },\r\n    getOpcode() {\r\n        return 0x0000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rsa) & registerBank.getUValue(rsb),\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rst) & immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default and;","const asr = {\r\n    getName() {\r\n        return 'asr';\r\n    },\r\n    getOpcode() {\r\n        return 0xA001;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        let value = registerBank.getValue(rsa);\r\n        simulation.setCarry(value & 1);\r\n        registerBank.setValue(\r\n            rst, \r\n            value >> 1,\r\n        );\r\n    },\r\n}\r\n\r\nexport default asr;","const bez = {\r\n    getName() {\r\n        return 'bez';\r\n    },\r\n    getOpcode() {\r\n        return 0xC000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        if (registerBank.getValue(rsa) === 0) {\r\n            simulation.setPC(registerBank.getValue(rsb) - 2);\r\n        }\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        if (registerBank.getValue(rst) === 0) {\r\n            simulation.setPC(simulation.getPC() + immediate);\r\n        }\r\n    },\r\n}\r\n\r\nexport default bez;","const bnz = {\r\n    getName() {\r\n        return 'bnz';\r\n    },\r\n    getOpcode() {\r\n        return 0xD000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        if (registerBank.getValue(rsa) !== 0) {\r\n            simulation.setPC(registerBank.getValue(rsb) - 2);\r\n        }\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        if (registerBank.getValue(rst) !== 0) {\r\n            simulation.setPC(simulation.getPC() + immediate);\r\n        }\r\n    },\r\n}\r\n\r\nexport default bnz;","const ldb = {\r\n    getName() {\r\n        return 'ldb';\r\n    },\r\n    getOpcode() {\r\n        return 0x0002;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let memory = simulation.getMemory();\r\n\r\n        registerBank.setValue(rst, await memory.readByte(registerBank.getUValue(rsb)));\r\n    },\r\n}\r\n\r\nexport default ldb;","const ldc = {\r\n    getName() {\r\n        return 'ldc';\r\n    },\r\n    getOpcode() {\r\n        return 0x9000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => false,\r\n    supportI: () => true,\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            (registerBank.getUValue(rst) << 8) | (immediate & 0xFF),\r\n        );\r\n    },\r\n}\r\n\r\nexport default ldc;","const ldr = {\r\n    getName() {\r\n        return 'ldr';\r\n    },\r\n    getOpcode() {\r\n        return 0x8000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => false,\r\n    supportI: () => true,\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default ldr;","const ldw = {\r\n    getName() {\r\n        return 'ldw';\r\n    },\r\n    getOpcode() {\r\n        return 0x4002;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let memory = simulation.getMemory();\r\n\r\n        registerBank.setValue(rst, await memory.readWord(registerBank.getUValue(rsb)));\r\n    },\r\n}\r\n\r\nexport default ldw;","const lsr = {\r\n    getName() {\r\n        return 'lsr';\r\n    },\r\n    getOpcode() {\r\n        return 0xA000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        let value = registerBank.getValue(rsa);\r\n        simulation.setCarry(value & 1);\r\n        registerBank.setValue(\r\n            rst, \r\n            value >>> 1,\r\n        );\r\n    },\r\n}\r\n\r\nexport default lsr;","const or = {\r\n    getName() {\r\n        return 'or';\r\n    },\r\n    getOpcode() {\r\n        return 0x1000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) | registerBank.getValue(rsb),\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rst) | immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default or;","const ror = {\r\n    getName() {\r\n        return 'ror';\r\n    },\r\n    getOpcode() {\r\n        return 0xA002;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let architecture = simulation.getArchitecture();\r\n\r\n        let value = registerBank.getUValue(rsa);\r\n        registerBank.setValue(\r\n            rst, \r\n            (value >> 1) | (simulation.getCarry() << (architecture.getBitWidth() - 1)),\r\n        );\r\n        simulation.setCarry(value & 1);\r\n    },\r\n}\r\n\r\nexport default ror;","const sbc = {\r\n    getName() {\r\n        return 'sbc';\r\n    },\r\n    getOpcode() {\r\n        return 0x6001;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let carry = simulation.getCarry();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) - registerBank.getValue(rsb) - carry,\r\n        );\r\n    },\r\n}\r\n\r\nexport default sbc;","const slt = {\r\n    getName() {\r\n        return 'slt';\r\n    },\r\n    getOpcode() {\r\n        return 0x3000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        \r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) < registerBank.getValue(rsb) ? 1 : 0,\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rst) < immediate ? 1 : 0,\r\n        );\r\n    },\r\n}\r\n\r\nexport default slt;","const sltu = {\r\n    getName() {\r\n        return 'sltu';\r\n    },\r\n    getOpcode() {\r\n        return 0x4000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rsa) < registerBank.getUValue(rsb) ? 1 : 0,\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rst) < (immediate >>> 0) ? 1 : 0,\r\n        );\r\n    },\r\n}\r\n\r\nexport default sltu;","const stb = {\r\n    getName() {\r\n        return 'stb';\r\n    },\r\n    getOpcode() {\r\n        return 0x1002;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let memory = simulation.getMemory();\r\n\r\n        await memory.writeByte(registerBank.getUValue(rsb), registerBank.getUValue(rsa));\r\n    },\r\n}\r\n\r\nexport default stb;","const stw = {\r\n    getName() {\r\n        return 'stw';\r\n    },\r\n    getOpcode() {\r\n        return 0x5002;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => false,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n        let memory = simulation.getMemory();\r\n\r\n        await memory.writeWord(registerBank.getUValue(rsb), registerBank.getUValue(rsa));\r\n    },\r\n}\r\n\r\nexport default stw;","const sub = {\r\n    getName() {\r\n        return 'sub';\r\n    },\r\n    getOpcode() {\r\n        return 0x6000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rsa) - registerBank.getValue(rsb),\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getValue(rst) - immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default sub;","const xor = {\r\n    getName() {\r\n        return 'xor';\r\n    },\r\n    getOpcode() {\r\n        return 0x2000;\r\n    },\r\n    isPseudo() {\r\n        return false;\r\n    },\r\n    supportR: () => true,\r\n    supportI: () => true,\r\n    async executeR(simulation, rst, rsa, rsb) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rsa) ^ registerBank.getUValue(rsb),\r\n        );\r\n    },\r\n    async executeI(simulation, rst, immediate) {\r\n        let registerBank = simulation.getRegisterBank();\r\n\r\n        registerBank.setValue(\r\n            rst, \r\n            registerBank.getUValue(rst) ^ immediate,\r\n        );\r\n    },\r\n}\r\n\r\nexport default xor;","var map = {\n\t\"./pseudo/hcf.js\": 199,\n\t\"./pseudo/ldi.js\": 200,\n\t\"./pseudo/lsl.js\": 201,\n\t\"./pseudo/pop.js\": 202,\n\t\"./pseudo/push.js\": 203\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 198;","const hcf = {\r\n    getName() {\r\n        return 'hcf';\r\n    },\r\n    isPseudo() {\r\n        return true;\r\n    },\r\n}\r\n\r\nexport default hcf;","const ldi = {\r\n    getName() {\r\n        return 'ldi';\r\n    },\r\n    isPseudo() {\r\n        return true;\r\n    },\r\n}\r\n\r\nexport default ldi;","const lsl = {\r\n    getName() {\r\n        return 'lsl';\r\n    },\r\n    isPseudo() {\r\n        return true;\r\n    },\r\n}\r\n\r\nexport default lsl;","const pop = {\r\n    getName() {\r\n        return 'pop';\r\n    },\r\n    isPseudo() {\r\n        return true;\r\n    },\r\n}\r\n\r\nexport default pop;","const push = {\r\n    getName() {\r\n        return 'push';\r\n    },\r\n    isPseudo() {\r\n        return true;\r\n    },\r\n}\r\n\r\nexport default push;","var map = {\n\t\"./pseudos/_large_immediate.js\": 205,\n\t\"./pseudos/asr.js\": 206,\n\t\"./pseudos/bez.js\": 207,\n\t\"./pseudos/bnz.js\": 208,\n\t\"./pseudos/hcf.js\": 209,\n\t\"./pseudos/ldb.js\": 210,\n\t\"./pseudos/ldi.js\": 211,\n\t\"./pseudos/ldw.js\": 212,\n\t\"./pseudos/lsl.js\": 213,\n\t\"./pseudos/lsr.js\": 214,\n\t\"./pseudos/pop.js\": 215,\n\t\"./pseudos/push.js\": 216,\n\t\"./pseudos/ror.js\": 217,\n\t\"./pseudos/stb.js\": 218,\n\t\"./pseudos/stw.js\": 219\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 204;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nlet supportedOpNames = new Set([ 'and', 'or', 'xor', 'slt', 'add', 'sub', 'bez', 'bnz' ]);\r\n\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst _large_immediate = {\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (!supportedOpNames.has(instruction.getOperation().getName())) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'literal':\r\n                    let literal = operands[1].getValue();\r\n                    if (literal > 127 || literal < -128) {\r\n                        return [\r\n                            new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), new Operand(literal, Operand.LITERAL) ]),\r\n                            new Instruction(instruction.getOperation(), [ operands[0], operands[0], new Operand('at', Operand.REGISTER) ]),\r\n                        ];\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default _large_immediate;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationAsr = operationsManager.getOperationByName('asr');\r\n\r\nconst asr = {\r\n    getOperation: () => operationAsr,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationAsr.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        return [\r\n            new Instruction(operationAsr, [ operands[0], operands[1], new Operand('r0', Operand.REGISTER) ] ),\r\n        ];\r\n    },\r\n};\r\n\r\nexport default asr;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationBez = operationsManager.getOperationByName('bez');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst bez = {\r\n    getOperation: () => operationBez,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationBez.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n        \r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // bez r1, r2 -> [ bez r0, r1, r2 ]\r\n                    return [\r\n                        new Instruction(operationBez, [ new Operand('r0', Operand.REGISTER), operands[0], operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                    // bez r1, sym -> [ ldi at, sym   bez r0, r1, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationBez, [ new Operand('r0', Operand.REGISTER), operands[0], new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default bez;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationBnz = operationsManager.getOperationByName('bnz');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst bnz = {\r\n    getOperation: () => operationBnz,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationBnz.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // bnz r1, r2 -> [ bnz r0, r1, r2 ]\r\n                    return [\r\n                        new Instruction(operationBnz, [ new Operand('r0', Operand.REGISTER), operands[0], operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                    // bnz r1, sym -> [ ldi at, sym   bnz r0, r1, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationBnz, [ new Operand('r0', Operand.REGISTER), operands[0], new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default bnz;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationHcf = operationsManager.getOperationByName('hcf');\r\n\r\nconst hcf = {\r\n    getOperation: () => operationHcf,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationHcf.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 0) return [];\r\n\r\n        // hcf -> [ ldb r0, r0, r0 ]\r\n        return [\r\n            new Instruction(operationHcf, [ \r\n                new Operand('r0', Operand.REGISTER), \r\n                new Operand('r0', Operand.REGISTER), \r\n                new Operand('r0', Operand.REGISTER)\r\n            ]),\r\n        ];\r\n    },\r\n};\r\n\r\nexport default hcf;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationLdb = operationsManager.getOperationByName('ldb');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst ldb = {\r\n    getOperation: () => operationLdb,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationLdb.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // ldb r1, r2 -> [ ldb r1, r0, r2 ]\r\n                    return [\r\n                        new Instruction(operationLdb, [ operands[0], new Operand('r0', Operand.REGISTER), operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                case 'literal':\r\n                    // ldb r1, 0 -> [ ldi at, 0   ldb r1, r0, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationLdb, [ operands[0], new Operand('r0', Operand.REGISTER), new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default ldb;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\nimport  utils from '../../../utils';\r\nconst operation = operationsManager.getOperationByName('ldi');\r\n\r\nconst operationLdr = operationsManager.getOperationByName('ldr');\r\nconst operationLdc = operationsManager.getOperationByName('ldc');\r\n\r\nconst ldi = {\r\n    getOperation: () => operation,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operation.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'literal':\r\n                    let literal = operands[1].getValue();\r\n                    if (literal < 256 && literal > -128) {\r\n                        // ldi r1, const -> ldr r1, const\r\n                        // -128 < const < 256\r\n                        return [\r\n                            new Instruction(operationLdr, [ operands[0], operands[1] ]),\r\n                        ];\r\n                    } else {\r\n                        // ldi r1, const -> [ ldr r1, const(first byte)   ldc r1, const(second byte) ]  (16 bits)\r\n                        // -128 >= const <= 256\r\n\r\n                        let bytes = utils.numberToBytes(literal, architecture.getByteWidth());\r\n                        if (bytes.length === 0) throw new Error('Convert number to bytes error');\r\n                        //bytes = utils.removeFirstZeroes(bytes);\r\n                        if (bytes.length === 0) {\r\n                            return [ new Instruction(operationLdr, [ operands[0], new Operand(0, Operand.LITERAL) ]) ]\r\n                        } else {\r\n                            return [\r\n                                new Instruction(operationLdr, [ operands[0], new Operand(bytes.shift(), Operand.LITERAL) ]),\r\n                                ...bytes.map(byte => new Instruction(operationLdc, [ operands[0], new Operand(byte, Operand.LITERAL) ])),\r\n                            ];\r\n                        }\r\n                    }\r\n                case 'symbol':\r\n                    // ldi r1, sym -> [ ldc r1, sym+0(1 byte)   ldc r1, sym+1(1 byte) ]\r\n                    return new Array(architecture.getByteWidth()).fill(0).map(\r\n                        (x, i) => {\r\n                            return new Instruction(operationLdc, [ \r\n                                operands[0], \r\n                                new Operand(operands[1].getValue(), Operand.SYMBOL).setByteRange({ min: i, max: i}),\r\n                            ]);\r\n                        }\r\n                    );\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default ldi;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationLdw = operationsManager.getOperationByName('ldw');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst ldw = {\r\n    getOperation: () => operationLdw,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationLdw.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // ldw r1, r2 -> [ ldw r1, r0, r2 ]\r\n                    return [\r\n                        new Instruction(operationLdw, [ operands[0], new Operand('r0', Operand.REGISTER), operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                case 'literal':\r\n                    // ldw r1, lit -> [ ldi at, lit   ldb r1, r0, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationLdw, [ operands[0], new Operand('r0', Operand.REGISTER), new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default ldw;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\n\r\nconst operationLsl = operationsManager.getOperationByName('lsl');\r\nconst operationAdd = operationsManager.getOperationByName('add');\r\n\r\nconst lsl = {\r\n    getOperation: () => operationLsl,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationLsl.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // lsl r1, r2 -> [ add r1, r2, r2 ]\r\n                    return [\r\n                        new Instruction(operationAdd, [ operands[0], operands[1], operands[1] ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default lsl;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationLsr = operationsManager.getOperationByName('lsr');\r\n\r\nconst lsr = {\r\n    getOperation: () => operationLsr,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationLsr.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        return [\r\n            new Instruction(operationLsr, [ operands[0], operands[1], new Operand('r0', Operand.REGISTER) ]),\r\n        ];\r\n    },\r\n};\r\n\r\nexport default lsr;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationPop = operationsManager.getOperationByName('pop');\r\nconst operationLdw = operationsManager.getOperationByName('ldw');\r\nconst operationAdd = operationsManager.getOperationByName('add');\r\n\r\nconst pop = {\r\n    getOperation: () => operationLdw,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationPop.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 1) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            // pop r1 -> [ ldw r1, sp   add sp, 2 ]\r\n            return [\r\n                new Instruction(operationLdw, [ operands[0], new Operand('sp', Operand.REGISTER) ]),\r\n                new Instruction(operationAdd, [ new Operand('sp', Operand.REGISTER), new Operand(2, Operand.LITERAL) ]),\r\n            ];\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default pop;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationPush = operationsManager.getOperationByName('push');\r\nconst operationSub = operationsManager.getOperationByName('sub');\r\nconst operationStw = operationsManager.getOperationByName('stw');\r\n\r\nconst push = {\r\n    getOperation: () => operationPush,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationPush.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 1) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            // push r1 -> [ sub sb, 2   stw r1, sp ]\r\n            return [\r\n                new Instruction(operationSub, [ new Operand('sp', Operand.REGISTER), new Operand(2, Operand.LITERAL) ]),\r\n                new Instruction(operationStw, [ operands[0], new Operand('sp', Operand.REGISTER) ]),\r\n            ];\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default push;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationRor = operationsManager.getOperationByName('ror');\r\n\r\nconst ror = {\r\n    getOperation: () => operationRor,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationRor.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        return [\r\n            new Instruction(operationRor, [ operands[0], operands[1], new Operand('r0', Operand.REGISTER) ]),\r\n        ];\r\n    },\r\n};\r\n\r\nexport default ror;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationStb = operationsManager.getOperationByName('stb');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst stb = {\r\n    getOperation: () => operationStb,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationStb.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // stb r1, r2 -> [ stb r0, r1, r2 ]\r\n                    return [\r\n                        new Instruction(operationStb, [ new Operand('r0', Operand.REGISTER), operands[0], operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                case 'literal':\r\n                    // stb r1, lit -> [ ldi at, lit   stb r0, r1, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationStb, [ new Operand('r0', Operand.REGISTER), operands[0], new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default stb;","import operationsManager from '../../operations/operationsManager';\r\nimport Instruction from '../../instruction';\r\nimport Operand from '../../operand';\r\n\r\nconst operationStw = operationsManager.getOperationByName('stw');\r\nconst operationLdi = operationsManager.getOperationByName('ldi');\r\n\r\nconst stw = {\r\n    getOperation: () => operationStw,\r\n    getNonPseudoInstructions: (instruction, architecture) => {\r\n        if (instruction.getOperation().getName() !== operationStw.getName()) return [];\r\n\r\n        let operands = instruction.getOperands();\r\n        if (operands.length !== 2) return [];\r\n\r\n        if (operands[0].getType() === 'register') {\r\n            switch (operands[1].getType()) {\r\n                case 'register':\r\n                    // stw r1, r2 -> [ stw r0, r1, r2 ]\r\n                    return [\r\n                        new Instruction(operationStw, [ new Operand('r0', Operand.REGISTER), operands[0], operands[1] ]),\r\n                    ];\r\n                case 'symbol':\r\n                case 'literal':\r\n                    // stw r1, lit -> [ ldi at, lit   stw r0, r1, at ]\r\n                    return [\r\n                        new Instruction(operationLdi, [ new Operand('at', Operand.REGISTER), operands[1] ]),\r\n                        new Instruction(operationStw, [ new Operand('r0', Operand.REGISTER), operands[0], new Operand('at', Operand.REGISTER) ]),\r\n                    ];\r\n                default:\r\n            }\r\n        }\r\n        return [];\r\n    },\r\n};\r\n\r\nexport default stw;","import { Component } from \"react\";\r\nimport styles from './Window.module.css'\r\n\r\nclass Window extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.name = props.name || \"Window\";\r\n    this.description = props.description || \"This is a window!\";\r\n\r\n    this.state = {  }\r\n  }\r\n  \r\n  render() { \r\n    return (\r\n      <div className={styles.container}>\r\n        <div className={styles.header}>\r\n          <div className={styles.title}>{this.name}</div>-<div className={styles.description}>{this.description}</div>\r\n        </div>\r\n        <div className={styles.content}>\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n \r\nexport default Window;","import styles from './App.module.css'\nimport Simulator from \"../simulator/Simulator.module\";\nimport Window from '../window/Window.module';\n\nfunction App() {\n  return (\n    <div className={styles.container}>\n        <Window name=\"Simulator\" description=\"Viking CPU Simulator\" >\n          <Simulator />\n        </Window>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app/App.module';\nimport './styles.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","import Instruction from './instruction';\r\n\r\nimport architectureManager from './architectureManager';\r\nimport operationsManager from './operations/operationsManager';\r\nimport pseudoManager from './pseudoInstructionConversions/pseudoManager';\r\nimport pseudoConverter from './pseudoInstructionConversions/pseudoConverter';\r\n\r\nimport assembler from './assembler/assembler';\r\nimport disassembler from './disassembler/disassembler';\r\n\r\nimport memory from './simulator/memory';\r\nimport memoryStorage16 from './simulator/memoryStorage16';\r\nimport registerBank from './simulator/registerBank';\r\n\r\nimport simulation from './simulator/simulation';\r\n\r\narchitectureManager.setup();\r\noperationsManager.setup();\r\npseudoManager.setup();\r\n\r\nconst asm = {\r\n    Instruction,\r\n    architectureManager,\r\n    operationsManager,\r\n    pseudoManager,\r\n    pseudoConverter,\r\n    assembler,\r\n    disassembler,\r\n    memory,\r\n    memoryStorage16,\r\n    registerBank,\r\n    simulation,\r\n};\r\n\r\nexport default asm;"],"sourceRoot":""}